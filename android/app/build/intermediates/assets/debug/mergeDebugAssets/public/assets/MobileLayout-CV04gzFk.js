import{c as L,A as X,u as $,Q as G,l as K,r as Q,j as e,L as j,a as s,X as Y}from"./index-C_D-5Bfv.js";import{B as n,C as J}from"./index-BtotK06U.js";import{u as ee,am as ae,a as N,r as w,an as se,b as y,af as te,ag as re,B as k,ab as ie,a2 as le,ao as ne,z as C,c as oe,d as ce,e as de,ap as me,w as x,Y as pe,S as A,aq as xe,ar as S,f as M,W as h,P as T,X as he,A as ue,H as be,a0 as ge,m as fe,a3 as ve,$ as je,T as Ne,Z as we}from"./card-BIr-PJK2.js";import{C as ye}from"./chevron-right-fj5H7AOZ.js";import{S as z}from"./sparkles-CBL8q4dG.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=L("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=L("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ae=[{path:"/",icon:S,label:"Inicio"},{path:"/equipos",icon:M,label:"Equipos"},{path:"/mantenimiento",icon:h,label:"Mant."},{path:"/inventario",icon:T,label:"Inventario"},{path:"/asistente",icon:z,label:"Asistente"}],Le=[{title:"Principal",items:[{path:"/",icon:S,label:"Dashboard"},{path:"/equipos",icon:M,label:"Equipos"},{path:"/mantenimiento",icon:h,label:"Mantenimiento"},{path:"/inventario",icon:T,label:"Inventario"}]},{title:"Planificación",items:[{path:"/planificador-inteligente",icon:Ce,label:"Planificador IA"},{path:"/planificador",icon:he,label:"Planificador Manual"},{path:"/planes-mantenimiento",icon:ue,label:"Planes Asignados"},{path:"/control-mantenimiento",icon:h,label:"Control Profesional"}]},{title:"Gestión",items:[{path:"/kits",icon:ke,label:"Kits Mantenimiento"},{path:"/historial",icon:be,label:"Historial"},{path:"/reportes",icon:ge,label:"Reportes"},{path:"/listas-personalizadas",icon:fe,label:"Listas Personalizadas"}]},{title:"Herramientas",items:[{path:"/asistente",icon:z,label:"Asistente IA"},{path:"/configuraciones",icon:ve,label:"Configuraciones"}]}];function Re({children:I,title:P,showBottomNav:o=!0,headerActions:R}){const u=X(),c=$(),{user:d,signOut:U}=G(),{currentUserRole:Z,loading:Se}=ee(),{toast:b}=K(),[q,g]=Q.useState(!1),{notificaciones:f,loading:B,noLeidas:l,marcarComoLeida:H,marcarTodasComoLeidas:O,eliminarNotificacion:D}=ae(),v=a=>a==="/"?u.pathname==="/":u.pathname.startsWith(a),i=Z==="admin",m=(d==null?void 0:d.email)||"Usuario",E=m.substring(0,2).toUpperCase(),_=a=>{switch(a){case"critical":return e.jsx(J,{className:"h-4 w-4 text-destructive"});case"warning":return e.jsx(Ne,{className:"h-4 w-4 text-amber-500"});default:return e.jsx(je,{className:"h-4 w-4 text-blue-500"})}},V=a=>{switch(a){case"critical":return"bg-red-50 border-red-200 dark:bg-red-950/20 dark:border-red-900/50";case"warning":return"bg-amber-50 border-amber-200 dark:bg-amber-950/20 dark:border-amber-900/50";default:return"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-900/50"}},W=a=>{H(a.id),a.accionUrl&&(g(!1),c(a.accionUrl))},F=async()=>{try{await U(),b({title:"Sesión cerrada",description:"Has cerrado sesión exitosamente"}),c("/auth")}catch{b({title:"Error",description:"No se pudo cerrar sesión",variant:"destructive"})}};return e.jsxs("div",{className:"flex min-h-[100dvh] h-[100dvh] flex-col overflow-hidden bg-background/95 supports-[backdrop-filter]:bg-background/60",children:[e.jsx("header",{className:"sticky top-0 z-50 glass-panel border-b-0 shadow-sm flex-shrink-0",children:e.jsxs("div",{className:"flex min-h-[48px] h-[clamp(48px,12vw,56px)] items-center justify-between px-[clamp(0.5rem,3vw,1rem)] pt-safe",children:[e.jsxs(j,{to:"/",className:"flex items-center gap-[clamp(0.25rem,2vw,0.5rem)] active:scale-95 transition-transform flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full"}),e.jsx("img",{src:"/favicon.ico",alt:"Logo",className:"relative h-[clamp(24px,7vw,32px)] w-[clamp(24px,7vw,32px)] object-contain"})]}),e.jsxs("div",{className:"flex flex-col leading-tight",children:[e.jsx("span",{className:"text-[clamp(0.6rem,2vw,0.75rem)] font-bold tracking-wider text-foreground/90",children:"ALITO"}),e.jsx("span",{className:"text-[clamp(0.5rem,1.5vw,0.65rem)] text-muted-foreground font-medium",children:"SRL"})]})]}),e.jsx("h1",{className:"flex-1 truncate text-center text-[clamp(0.7rem,3vw,0.875rem)] font-semibold text-foreground/90 animate-fade-in px-[clamp(0.25rem,2vw,0.5rem)]",children:P}),e.jsxs("div",{className:"flex items-center gap-[clamp(0.125rem,1vw,0.25rem)] flex-shrink-0",children:[R,e.jsxs(N,{children:[e.jsx(w,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-[clamp(36px,10vw,44px)] w-[clamp(36px,10vw,44px)] min-h-[44px] min-w-[44px] rounded-full hover:bg-primary/10 active:scale-90 transition-all",children:e.jsx(se,{className:"h-[clamp(18px,5vw,22px)] w-[clamp(18px,5vw,22px)] text-foreground/80"})})}),e.jsx(y,{side:"right",className:"w-[85vw] sm:w-80 p-0 border-l-0 bg-background",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"relative p-4 pb-3 border-b border-border/50",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent"}),e.jsxs("div",{className:s("relative flex items-center gap-3 p-3 rounded-xl border mb-4",i?"border-primary/30 bg-primary/5":"border-border bg-muted/30"),children:[e.jsx(te,{className:s("h-10 w-10 border-2",i?"border-primary/40":"border-border"),children:e.jsx(re,{className:s("text-sm font-bold",i?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:E})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium truncate",title:m,children:m}),e.jsxs(k,{variant:i?"default":"secondary",className:s("w-fit gap-1 text-[10px] px-1.5 py-0 mt-1",i?"bg-primary/90":""),children:[i?e.jsx(ie,{className:"h-2.5 w-2.5"}):e.jsx(le,{className:"h-2.5 w-2.5"}),i?"Admin":"Usuario"]})]}),e.jsx(ne,{})]}),e.jsxs(N,{open:q,onOpenChange:g,children:[e.jsx(w,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"relative w-full justify-start gap-3 h-11 text-sm font-medium hover:bg-primary/10 rounded-xl transition-all group overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"rounded-lg p-1.5 bg-primary/10",children:e.jsx(C,{className:"h-4 w-4 text-primary"})}),"Notificaciones"]}),l>0&&e.jsx(k,{variant:"destructive",className:"shadow-lg shadow-destructive/30",children:l>99?"99+":l})]})}),e.jsxs(y,{side:"bottom",className:"h-[85vh] rounded-t-[2rem] bg-background",children:[e.jsx("div",{className:"mx-auto mt-2 h-1 w-12 rounded-full bg-muted"}),e.jsxs(oe,{className:"mt-4",children:[e.jsx(ce,{className:"text-center text-xl font-bold",children:"Notificaciones"}),e.jsx(de,{className:"text-center",children:l>0?`${l} sin leer`:"Todas leídas"})]}),l>0&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs(n,{variant:"outline",size:"sm",onClick:O,className:"gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Marcar todas como leídas"]})}),e.jsx(x,{className:"flex-1 mt-4 h-[calc(85vh-180px)]",children:B?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando notificaciones..."}):f.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(C,{className:"h-16 w-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay notificaciones"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Todo está al día"})]}):e.jsx("div",{className:"space-y-2 px-4 pb-8",children:f.map(a=>e.jsx("div",{className:s("p-3 rounded-xl border transition-colors cursor-pointer",a.leida?"bg-muted/30 border-border/50":V(a.nivel)),onClick:()=>W(a),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:_(a.nivel)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:s("font-medium text-sm leading-tight",!a.leida&&"font-semibold"),children:a.titulo}),e.jsx(n,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0 -mt-1 -mr-1",onClick:r=>{r.stopPropagation(),D(a.id)},children:e.jsx(Y,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:a.mensaje}),e.jsx("span",{className:"text-[10px] text-muted-foreground mt-2 block",children:pe(new Date(a.createdAt),{addSuffix:!0,locale:we})})]})]})},a.id))})})]})]})]}),e.jsx(A,{className:"opacity-50"}),e.jsx(x,{className:"flex-1",children:e.jsx("div",{className:"px-4 py-4 space-y-6",children:Le.map(a=>e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:a.title}),e.jsx("div",{className:"space-y-1",children:a.items.map(r=>{const p=r.icon,t=v(r.path);return e.jsxs(n,{variant:"ghost",className:s("relative w-full justify-start gap-3 h-11 text-sm font-medium transition-all rounded-xl group overflow-hidden",t?"bg-gradient-to-r from-primary/15 to-primary/5 text-primary hover:from-primary/20 hover:to-primary/10 shadow-sm":"hover:bg-muted/50"),onClick:()=>c(r.path),children:[t&&e.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-gradient-to-b from-primary to-purple-600 rounded-r"}),e.jsxs("div",{className:"relative flex items-center gap-3 flex-1",children:[e.jsx("div",{className:s("rounded-lg p-1.5 transition-colors",t?"bg-primary/20":"bg-transparent group-hover:bg-muted"),children:e.jsx(p,{className:s("h-4 w-4",t&&"text-primary")})}),e.jsx("span",{className:"flex-1 text-left",children:r.label})]}),t&&e.jsx(ye,{className:"h-4 w-4 text-primary animate-in slide-in-from-left-2"})]},r.path)})})]},a.title))})}),e.jsx(A,{className:"opacity-50"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs(n,{variant:"ghost",className:"w-full justify-start gap-3 h-11 text-sm font-medium text-destructive hover:bg-destructive/5",onClick:F,children:[e.jsx(xe,{className:"h-4 w-4"}),"Cerrar sesión"]}),e.jsx("div",{className:"text-center text-xs text-muted-foreground pt-2",children:"v1.0.0 • Alito App"})]})]})})]})]})]})}),e.jsx(x,{className:s("flex-1 bg-slate-50/50 dark:bg-slate-950/50",o&&"pb-safe"),children:e.jsx("main",{className:s("container mx-auto p-[clamp(0.5rem,3vw,1rem)] animate-fade-in max-w-screen-xl",o&&"mb-[clamp(70px,20vw,96px)]"),children:I})}),o&&e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 glass-panel border-t-0 shadow-[0_-4px_20px_-5px_rgba(0,0,0,0.1)]",children:e.jsx("div",{className:s("flex min-h-[56px] h-[clamp(56px,15vw,64px)] items-center justify-around px-[clamp(0.25rem,2vw,0.5rem)]","pb-[max(env(safe-area-inset-bottom,0px),0.25rem)]"),children:Ae.map(({path:a,icon:r,label:p})=>{const t=v(a);return e.jsxs(j,{to:a,className:s("group flex flex-1 flex-col items-center justify-center gap-[clamp(0.125rem,1vw,0.25rem)] py-[clamp(0.25rem,1vw,0.5rem)] transition-all duration-300 touch-callout-none select-none min-h-[44px]",t?"text-primary":"text-muted-foreground hover:text-foreground"),children:[e.jsxs("div",{className:s("relative rounded-2xl p-[clamp(0.25rem,1.5vw,0.375rem)] transition-all duration-300 group-active:scale-90",t&&"bg-primary/10 -translate-y-0.5 shadow-glow-primary"),children:[e.jsx(r,{className:s("h-[clamp(16px,5vw,20px)] w-[clamp(16px,5vw,20px)] transition-all duration-300",t?"stroke-[2.5px]":"stroke-2")}),t&&e.jsx("span",{className:"absolute -bottom-0.5 left-1/2 h-1 w-1 -translate-x-1/2 rounded-full bg-primary"})]}),e.jsx("span",{className:s("text-[clamp(0.55rem,2vw,0.65rem)] font-medium transition-all duration-300 text-center leading-tight",t?"opacity-100 font-semibold":"opacity-70"),children:p})]},a)})})})]})}export{Re as M,Ce as Z};
