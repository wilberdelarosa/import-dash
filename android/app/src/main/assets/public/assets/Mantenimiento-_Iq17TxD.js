const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-03oR84lN.js","assets/index-C_D-5Bfv.js","assets/index-D4mtYYTS.css"])))=>i.map(i=>d[i]);
import{c as ka,R as I,r as L,j as r,a as be,S as Na,_ as us,u as wa,b as Ca,l as Sa,m as As,X as jt}from"./index-C_D-5Bfv.js";import{V as Fa,R as Aa,a as Vs,r as sa,b as Ds,c as Os,d as Is,e as Ps,W as rr,B as ue,T as ar,t as hs,X as cs,s as ra,L as nr,I as ir,J as or,K as lr,M as cr,N as dr,O as ur,Q as hr,U as mr,D as fr,o as xr,p as gr,q as pr,F as vr,G as yr,g as It,h as Pt,l as Lt,k as $t,j as Ea,v as Ta}from"./card-BIr-PJK2.js";import{Z as Ma,a as Ra,E as Va}from"./EquipoLink-CSkpzgUp.js";import{T as Da,a as Oa,b as br,c as Ie,d as Ia,e as Pe}from"./table-CQA1OK80.js";import{I as oe}from"./input-DSUZcGci.js";import{B as Y,C as is}from"./index-BtotK06U.js";import{S as Pa}from"./slider-soslqLj5.js";import{L as Re}from"./label-CqFCS6R-.js";import{C as qe}from"./checkbox-BKYUVAI4.js";import{S as La}from"./switch-B03PpzBD.js";import{f as Bt}from"./maintenanceUtils-fNWGA9SH.js";import{u as $a}from"./useDeviceDetection-CShWnkOv.js";import{M as za}from"./MobileLayout-CV04gzFk.js";import{M as zt}from"./MobileCard-DMSzGukU.js";import{D as Za,a as Ua,E as Ka,b as Ba,c as os,d as qa}from"./dropdown-menu-DmUKo3Zs.js";import{S as _r,a as jr,b as kr,c as Nr,d as ls}from"./select-3Jn5ARjr.js";import{L as Wa}from"./list-filter-CnSSRe_v.js";import{C as qt}from"./clock-Chbx4_2l.js";import{S as Ha}from"./square-pen-B3pUQB5y.js";import{P as aa}from"./plus-Cjn5SSed.js";import{C as Ls}from"./circle-check-DUwGofyK.js";import{D as wr}from"./download-CzgKvGv0.js";import{F as Cr}from"./filter-ldW4984T.js";import{P as Ga}from"./pencil-CnmjDfEJ.js";import"./EquipoDetalleUnificado-BkhxSrqD.js";import"./useHistorial-CCPwivlN.js";import"./tabs-KnLULWOS.js";import"./index-APdQY6Km.js";import"./accordion-CavA7SNR.js";import"./useCaterpillarData-DbqCupgf.js";import"./caterpillarMaintenance-Dg_xV4Xi.js";import"./usePlanes-D-d8Ujwc.js";import"./sparkles-CBL8q4dG.js";import"./format-B1dMESlT.js";import"./trending-up-Hw4Rtp_f.js";import"./activity-DZxii9vr.js";import"./chevron-right-fj5H7AOZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ka("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var Qt=t=>t.type==="checkbox",ft=t=>t instanceof Date,Fe=t=>t==null;const na=t=>typeof t=="object";var ne=t=>!Fe(t)&&!Array.isArray(t)&&na(t)&&!ft(t),ia=t=>ne(t)&&t.target?Qt(t.target)?t.target.checked:t.target.value:t,Ja=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,oa=(t,e)=>t.has(Ja(e)),Qa=t=>{const e=t.constructor&&t.constructor.prototype;return ne(e)&&e.hasOwnProperty("isPrototypeOf")},Ws=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function de(t){let e;const s=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Ws&&(t instanceof Blob||a))&&(s||ne(t)))if(e=s?[]:{},!s&&!Qa(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=de(t[n]));else return t;return e}var js=t=>/^\w*$/.test(t),ae=t=>t===void 0,Hs=t=>Array.isArray(t)?t.filter(Boolean):[],Gs=t=>Hs(t.replace(/["|']|\]/g,"").split(/\.|\[/)),j=(t,e,s)=>{if(!e||!ne(t))return s;const a=(js(e)?[e]:Gs(e)).reduce((n,o)=>Fe(n)?n:n[o],t);return ae(a)||a===t?ae(t[e])?s:t[e]:a},Ve=t=>typeof t=="boolean",q=(t,e,s)=>{let a=-1;const n=js(e)?[e]:Gs(e),o=n.length,l=o-1;for(;++a<o;){const d=n[a];let x=s;if(a!==l){const m=t[d];x=ne(m)||Array.isArray(m)?m:isNaN(+n[a+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=x,t=t[d]}};const ms={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ue={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Je={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ys=I.createContext(null);Ys.displayName="HookFormContext";const ks=()=>I.useContext(Ys),Xa=t=>{const{children:e,...s}=t;return I.createElement(Ys.Provider,{value:s},e)};var la=(t,e,s,a=!0)=>{const n={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(n,o,{get:()=>{const l=o;return e._proxyFormState[l]!==Ue.all&&(e._proxyFormState[l]=!a||Ue.all),s&&(s[l]=!0),t[l]}});return n};const Js=typeof window<"u"?I.useLayoutEffect:I.useEffect;function en(t){const e=ks(),{control:s=e.control,disabled:a,name:n,exact:o}=t||{},[l,d]=I.useState(s._formState),x=I.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Js(()=>s._subscribe({name:n,formState:x.current,exact:o,callback:m=>{!a&&d({...s._formState,...m})}}),[n,a,o]),I.useEffect(()=>{x.current.isValid&&s._setValid(!0)},[s]),I.useMemo(()=>la(l,s,x.current,!1),[l,s])}var We=t=>typeof t=="string",ca=(t,e,s,a,n)=>We(t)?(a&&e.watch.add(t),j(s,t,n)):Array.isArray(t)?t.map(o=>(a&&e.watch.add(o),j(s,o))):(a&&(e.watchAll=!0),s),$s=t=>Fe(t)||!na(t);function Qe(t,e,s=new WeakSet){if($s(t)||$s(e))return t===e;if(ft(t)&&ft(e))return t.getTime()===e.getTime();const a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;if(s.has(t)||s.has(e))return!0;s.add(t),s.add(e);for(const o of a){const l=t[o];if(!n.includes(o))return!1;if(o!=="ref"){const d=e[o];if(ft(l)&&ft(d)||ne(l)&&ne(d)||Array.isArray(l)&&Array.isArray(d)?!Qe(l,d,s):l!==d)return!1}}return!0}function tn(t){const e=ks(),{control:s=e.control,name:a,defaultValue:n,disabled:o,exact:l,compute:d}=t||{},x=I.useRef(n),m=I.useRef(d),y=I.useRef(void 0);m.current=d;const R=I.useMemo(()=>s._getWatch(a,x.current),[s,a]),[f,Q]=I.useState(m.current?m.current(R):R);return Js(()=>s._subscribe({name:a,formState:{values:!0},exact:l,callback:fe=>{if(!o){const U=ca(a,s._names,fe.values||s._formValues,!1,x.current);if(m.current){const ee=m.current(U);Qe(ee,y.current)||(Q(ee),y.current=ee)}else Q(U)}}}),[s,o,a,l]),I.useEffect(()=>s._removeUnmounted()),f}function sn(t){const e=ks(),{name:s,disabled:a,control:n=e.control,shouldUnregister:o,defaultValue:l}=t,d=oa(n._names.array,s),x=I.useMemo(()=>j(n._formValues,s,j(n._defaultValues,s,l)),[n,s,l]),m=tn({control:n,name:s,defaultValue:x,exact:!0}),y=en({control:n,name:s,exact:!0}),R=I.useRef(t),f=I.useRef(n.register(s,{...t.rules,value:m,...Ve(t.disabled)?{disabled:t.disabled}:{}}));R.current=t;const Q=I.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!j(y.errors,s)},isDirty:{enumerable:!0,get:()=>!!j(y.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!j(y.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!j(y.validatingFields,s)},error:{enumerable:!0,get:()=>j(y.errors,s)}}),[y,s]),fe=I.useCallback(F=>f.current.onChange({target:{value:ia(F),name:s},type:ms.CHANGE}),[s]),U=I.useCallback(()=>f.current.onBlur({target:{value:j(n._formValues,s),name:s},type:ms.BLUR}),[s,n._formValues]),ee=I.useCallback(F=>{const X=j(n._fields,s);X&&F&&(X._f.ref={focus:()=>F.focus&&F.focus(),select:()=>F.select&&F.select(),setCustomValidity:J=>F.setCustomValidity(J),reportValidity:()=>F.reportValidity()})},[n._fields,s]),$e=I.useMemo(()=>({name:s,value:m,...Ve(a)||y.disabled?{disabled:y.disabled||a}:{},onChange:fe,onBlur:U,ref:ee}),[s,a,y.disabled,fe,U,ee,m]);return I.useEffect(()=>{const F=n._options.shouldUnregister||o;n.register(s,{...R.current.rules,...Ve(R.current.disabled)?{disabled:R.current.disabled}:{}});const X=(J,H)=>{const te=j(n._fields,J);te&&te._f&&(te._f.mount=H)};if(X(s,!0),F){const J=de(j(n._options.defaultValues,s));q(n._defaultValues,s,J),ae(j(n._formValues,s))&&q(n._formValues,s,J)}return!d&&n.register(s),()=>{(d?F&&!n._state.action:F)?n.unregister(s):X(s,!1)}},[s,n,d,o]),I.useEffect(()=>{n._setDisabledField({disabled:a,name:s})},[a,s,n]),I.useMemo(()=>({field:$e,formState:y,fieldState:Q}),[$e,y,Q])}const rn=t=>t.render(sn(t));var da=(t,e,s,a,n)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[a]:n||!0}}:{},Wt=t=>Array.isArray(t)?t:[t],Sr=()=>{let t=[];return{get observers(){return t},next:n=>{for(const o of t)o.next&&o.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(o=>o!==n)}}),unsubscribe:()=>{t=[]}}},Ee=t=>ne(t)&&!Object.keys(t).length,Qs=t=>t.type==="file",Ke=t=>typeof t=="function",fs=t=>{if(!Ws)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ua=t=>t.type==="select-multiple",Xs=t=>t.type==="radio",an=t=>Xs(t)||Qt(t),Es=t=>fs(t)&&t.isConnected;function nn(t,e){const s=e.slice(0,-1).length;let a=0;for(;a<s;)t=ae(t)?a++:t[e[a++]];return t}function on(t){for(const e in t)if(t.hasOwnProperty(e)&&!ae(t[e]))return!1;return!0}function le(t,e){const s=Array.isArray(e)?e:js(e)?[e]:Gs(e),a=s.length===1?t:nn(t,s),n=s.length-1,o=s[n];return a&&delete a[o],n!==0&&(ne(a)&&Ee(a)||Array.isArray(a)&&on(a))&&le(t,s.slice(0,-1)),t}var ha=t=>{for(const e in t)if(Ke(t[e]))return!0;return!1};function xs(t,e={}){const s=Array.isArray(t);if(ne(t)||s)for(const a in t)Array.isArray(t[a])||ne(t[a])&&!ha(t[a])?(e[a]=Array.isArray(t[a])?[]:{},xs(t[a],e[a])):Fe(t[a])||(e[a]=!0);return e}function ma(t,e,s){const a=Array.isArray(t);if(ne(t)||a)for(const n in t)Array.isArray(t[n])||ne(t[n])&&!ha(t[n])?ae(e)||$s(s[n])?s[n]=Array.isArray(t[n])?xs(t[n],[]):{...xs(t[n])}:ma(t[n],Fe(e)?{}:e[n],s[n]):s[n]=!Qe(t[n],e[n]);return s}var Zt=(t,e)=>ma(t,e,xs(e));const Fr={value:!1,isValid:!1},Ar={value:!0,isValid:!0};var fa=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ae(t[0].attributes.value)?ae(t[0].value)||t[0].value===""?Ar:{value:t[0].value,isValid:!0}:Ar:Fr}return Fr},xa=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:a})=>ae(t)?t:e?t===""?NaN:t&&+t:s&&We(t)?new Date(t):a?a(t):t;const Er={isValid:!1,value:null};var ga=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,Er):Er;function Tr(t){const e=t.ref;return Qs(e)?e.files:Xs(e)?ga(t.refs).value:ua(e)?[...e.selectedOptions].map(({value:s})=>s):Qt(e)?fa(t.refs).value:xa(ae(e.value)?t.ref.value:e.value,t)}var ln=(t,e,s,a)=>{const n={};for(const o of t){const l=j(e,o);l&&q(n,o,l._f)}return{criteriaMode:s,names:[...t],fields:n,shouldUseNativeValidation:a}},gs=t=>t instanceof RegExp,Ut=t=>ae(t)?t:gs(t)?t.source:ne(t)?gs(t.value)?t.value.source:t.value:t,Mr=t=>({isOnSubmit:!t||t===Ue.onSubmit,isOnBlur:t===Ue.onBlur,isOnChange:t===Ue.onChange,isOnAll:t===Ue.all,isOnTouch:t===Ue.onTouched});const Rr="AsyncFunction";var cn=t=>!!t&&!!t.validate&&!!(Ke(t.validate)&&t.validate.constructor.name===Rr||ne(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Rr)),dn=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Vr=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const Ht=(t,e,s,a)=>{for(const n of s||Object.keys(t)){const o=j(t,n);if(o){const{_f:l,...d}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],n)&&!a)return!0;if(l.ref&&e(l.ref,l.name)&&!a)return!0;if(Ht(d,e))break}else if(ne(d)&&Ht(d,e))break}}};function Dr(t,e,s){const a=j(t,s);if(a||js(s))return{error:a,name:s};const n=s.split(".");for(;n.length;){const o=n.join("."),l=j(e,o),d=j(t,o);if(l&&!Array.isArray(l)&&s!==o)return{name:s};if(d&&d.type)return{name:o,error:d};if(d&&d.root&&d.root.type)return{name:`${o}.root`,error:d.root};n.pop()}return{name:s}}var un=(t,e,s,a)=>{s(t);const{name:n,...o}=t;return Ee(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!a||Ue.all))},hn=(t,e,s)=>!t||!e||t===e||Wt(t).some(a=>a&&(s?a===e:a.startsWith(e)||e.startsWith(a))),mn=(t,e,s,a,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(e||t):(s?a.isOnBlur:n.isOnBlur)?!t:(s?a.isOnChange:n.isOnChange)?t:!0,fn=(t,e)=>!Hs(j(t,e)).length&&le(t,e),xn=(t,e,s)=>{const a=Wt(j(t,s));return q(a,"root",e[s]),q(t,s,a),t},ds=t=>We(t);function Or(t,e,s="validate"){if(ds(t)||Array.isArray(t)&&t.every(ds)||Ve(t)&&!t)return{type:s,message:ds(t)?t:"",ref:e}}var kt=t=>ne(t)&&!gs(t)?t:{value:t,message:""},Ir=async(t,e,s,a,n,o)=>{const{ref:l,refs:d,required:x,maxLength:m,minLength:y,min:R,max:f,pattern:Q,validate:fe,name:U,valueAsNumber:ee,mount:$e}=t._f,F=j(s,U);if(!$e||e.has(U))return{};const X=d?d[0]:l,J=g=>{n&&X.reportValidity&&(X.setCustomValidity(Ve(g)?"":g||""),X.reportValidity())},H={},te=Xs(l),_e=Qt(l),ie=te||_e,ce=(ee||Qs(l))&&ae(l.value)&&ae(F)||fs(l)&&l.value===""||F===""||Array.isArray(F)&&!F.length,ke=da.bind(null,U,a,H),Ne=(g,V,A,K=Je.maxLength,P=Je.minLength)=>{const he=g?V:A;H[U]={type:g?K:P,message:he,ref:l,...ke(g?K:P,he)}};if(o?!Array.isArray(F)||!F.length:x&&(!ie&&(ce||Fe(F))||Ve(F)&&!F||_e&&!fa(d).isValid||te&&!ga(d).isValid)){const{value:g,message:V}=ds(x)?{value:!!x,message:x}:kt(x);if(g&&(H[U]={type:Je.required,message:V,ref:X,...ke(Je.required,V)},!a))return J(V),H}if(!ce&&(!Fe(R)||!Fe(f))){let g,V;const A=kt(f),K=kt(R);if(!Fe(F)&&!isNaN(F)){const P=l.valueAsNumber||F&&+F;Fe(A.value)||(g=P>A.value),Fe(K.value)||(V=P<K.value)}else{const P=l.valueAsDate||new Date(F),he=gt=>new Date(new Date().toDateString()+" "+gt),Be=l.type=="time",Ge=l.type=="week";We(A.value)&&F&&(g=Be?he(F)>he(A.value):Ge?F>A.value:P>new Date(A.value)),We(K.value)&&F&&(V=Be?he(F)<he(K.value):Ge?F<K.value:P<new Date(K.value))}if((g||V)&&(Ne(!!g,A.message,K.message,Je.max,Je.min),!a))return J(H[U].message),H}if((m||y)&&!ce&&(We(F)||o&&Array.isArray(F))){const g=kt(m),V=kt(y),A=!Fe(g.value)&&F.length>+g.value,K=!Fe(V.value)&&F.length<+V.value;if((A||K)&&(Ne(A,g.message,V.message),!a))return J(H[U].message),H}if(Q&&!ce&&We(F)){const{value:g,message:V}=kt(Q);if(gs(g)&&!F.match(g)&&(H[U]={type:Je.pattern,message:V,ref:l,...ke(Je.pattern,V)},!a))return J(V),H}if(fe){if(Ke(fe)){const g=await fe(F,s),V=Or(g,X);if(V&&(H[U]={...V,...ke(Je.validate,V.message)},!a))return J(V.message),H}else if(ne(fe)){let g={};for(const V in fe){if(!Ee(g)&&!a)break;const A=Or(await fe[V](F,s),X,V);A&&(g={...A,...ke(V,A.message)},J(A.message),a&&(H[U]=g))}if(!Ee(g)&&(H[U]={ref:X,...g},!a))return H}}return J(!0),H};const gn={mode:Ue.onSubmit,reValidateMode:Ue.onChange,shouldFocusError:!0};function pn(t={}){let e={...gn,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ke(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},a={},n=ne(e.defaultValues)||ne(e.values)?de(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:de(n),l={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,m=0;const y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let R={...y};const f={array:Sr(),state:Sr()},Q=e.criteriaMode===Ue.all,fe=c=>u=>{clearTimeout(m),m=setTimeout(c,u)},U=async c=>{if(!e.disabled&&(y.isValid||R.isValid||c)){const u=e.resolver?Ee((await _e()).errors):await ce(a,!0);u!==s.isValid&&f.state.next({isValid:u})}},ee=(c,u)=>{!e.disabled&&(y.isValidating||y.validatingFields||R.isValidating||R.validatingFields)&&((c||Array.from(d.mount)).forEach(h=>{h&&(u?q(s.validatingFields,h,u):le(s.validatingFields,h))}),f.state.next({validatingFields:s.validatingFields,isValidating:!Ee(s.validatingFields)}))},$e=(c,u=[],h,k,_=!0,b=!0)=>{if(k&&h&&!e.disabled){if(l.action=!0,b&&Array.isArray(j(a,c))){const S=h(j(a,c),k.argA,k.argB);_&&q(a,c,S)}if(b&&Array.isArray(j(s.errors,c))){const S=h(j(s.errors,c),k.argA,k.argB);_&&q(s.errors,c,S),fn(s.errors,c)}if((y.touchedFields||R.touchedFields)&&b&&Array.isArray(j(s.touchedFields,c))){const S=h(j(s.touchedFields,c),k.argA,k.argB);_&&q(s.touchedFields,c,S)}(y.dirtyFields||R.dirtyFields)&&(s.dirtyFields=Zt(n,o)),f.state.next({name:c,isDirty:Ne(c,u),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else q(o,c,u)},F=(c,u)=>{q(s.errors,c,u),f.state.next({errors:s.errors})},X=c=>{s.errors=c,f.state.next({errors:s.errors,isValid:!1})},J=(c,u,h,k)=>{const _=j(a,c);if(_){const b=j(o,c,ae(h)?j(n,c):h);ae(b)||k&&k.defaultChecked||u?q(o,c,u?b:Tr(_._f)):A(c,b),l.mount&&U()}},H=(c,u,h,k,_)=>{let b=!1,S=!1;const Z={name:c};if(!e.disabled){if(!h||k){(y.isDirty||R.isDirty)&&(S=s.isDirty,s.isDirty=Z.isDirty=Ne(),b=S!==Z.isDirty);const W=Qe(j(n,c),u);S=!!j(s.dirtyFields,c),W?le(s.dirtyFields,c):q(s.dirtyFields,c,!0),Z.dirtyFields=s.dirtyFields,b=b||(y.dirtyFields||R.dirtyFields)&&S!==!W}if(h){const W=j(s.touchedFields,c);W||(q(s.touchedFields,c,h),Z.touchedFields=s.touchedFields,b=b||(y.touchedFields||R.touchedFields)&&W!==h)}b&&_&&f.state.next(Z)}return b?Z:{}},te=(c,u,h,k)=>{const _=j(s.errors,c),b=(y.isValid||R.isValid)&&Ve(u)&&s.isValid!==u;if(e.delayError&&h?(x=fe(()=>F(c,h)),x(e.delayError)):(clearTimeout(m),x=null,h?q(s.errors,c,h):le(s.errors,c)),(h?!Qe(_,h):_)||!Ee(k)||b){const S={...k,...b&&Ve(u)?{isValid:u}:{},errors:s.errors,name:c};s={...s,...S},f.state.next(S)}},_e=async c=>{ee(c,!0);const u=await e.resolver(o,e.context,ln(c||d.mount,a,e.criteriaMode,e.shouldUseNativeValidation));return ee(c),u},ie=async c=>{const{errors:u}=await _e(c);if(c)for(const h of c){const k=j(u,h);k?q(s.errors,h,k):le(s.errors,h)}else s.errors=u;return u},ce=async(c,u,h={valid:!0})=>{for(const k in c){const _=c[k];if(_){const{_f:b,...S}=_;if(b){const Z=d.array.has(b.name),W=_._f&&cn(_._f);W&&y.validatingFields&&ee([k],!0);const we=await Ir(_,d.disabled,o,Q,e.shouldUseNativeValidation&&!u,Z);if(W&&y.validatingFields&&ee([k]),we[b.name]&&(h.valid=!1,u))break;!u&&(j(we,b.name)?Z?xn(s.errors,we,b.name):q(s.errors,b.name,we[b.name]):le(s.errors,b.name))}!Ee(S)&&await ce(S,u,h)}}return h.valid},ke=()=>{for(const c of d.unMount){const u=j(a,c);u&&(u._f.refs?u._f.refs.every(h=>!Es(h)):!Es(u._f.ref))&&et(c)}d.unMount=new Set},Ne=(c,u)=>!e.disabled&&(c&&u&&q(o,c,u),!Qe(gt(),n)),g=(c,u,h)=>ca(c,d,{...l.mount?o:ae(u)?n:We(c)?{[c]:u}:u},h,u),V=c=>Hs(j(l.mount?o:n,c,e.shouldUnregister?j(n,c,[]):[])),A=(c,u,h={})=>{const k=j(a,c);let _=u;if(k){const b=k._f;b&&(!b.disabled&&q(o,c,xa(u,b)),_=fs(b.ref)&&Fe(u)?"":u,ua(b.ref)?[...b.ref.options].forEach(S=>S.selected=_.includes(S.value)):b.refs?Qt(b.ref)?b.refs.forEach(S=>{(!S.defaultChecked||!S.disabled)&&(Array.isArray(_)?S.checked=!!_.find(Z=>Z===S.value):S.checked=_===S.value||!!_)}):b.refs.forEach(S=>S.checked=S.value===_):Qs(b.ref)?b.ref.value="":(b.ref.value=_,b.ref.type||f.state.next({name:c,values:de(o)})))}(h.shouldDirty||h.shouldTouch)&&H(c,_,h.shouldTouch,h.shouldDirty,!0),h.shouldValidate&&Ge(c)},K=(c,u,h)=>{for(const k in u){if(!u.hasOwnProperty(k))return;const _=u[k],b=c+"."+k,S=j(a,b);(d.array.has(c)||ne(_)||S&&!S._f)&&!ft(_)?K(b,_,h):A(b,_,h)}},P=(c,u,h={})=>{const k=j(a,c),_=d.array.has(c),b=de(u);q(o,c,b),_?(f.array.next({name:c,values:de(o)}),(y.isDirty||y.dirtyFields||R.isDirty||R.dirtyFields)&&h.shouldDirty&&f.state.next({name:c,dirtyFields:Zt(n,o),isDirty:Ne(c,b)})):k&&!k._f&&!Fe(b)?K(c,b,h):A(c,b,h),Vr(c,d)&&f.state.next({...s,name:c}),f.state.next({name:l.mount?c:void 0,values:de(o)})},he=async c=>{l.mount=!0;const u=c.target;let h=u.name,k=!0;const _=j(a,h),b=W=>{k=Number.isNaN(W)||ft(W)&&isNaN(W.getTime())||Qe(W,j(o,h,W))},S=Mr(e.mode),Z=Mr(e.reValidateMode);if(_){let W,we;const rt=u.type?Tr(_._f):ia(c),Oe=c.type===ms.BLUR||c.type===ms.FOCUS_OUT,Rt=!dn(_._f)&&!e.resolver&&!j(s.errors,h)&&!_._f.deps||mn(Oe,j(s.touchedFields,h),s.isSubmitted,Z,S),vt=Vr(h,d,Oe);q(o,h,rt),Oe?(_._f.onBlur&&_._f.onBlur(c),x&&x(0)):_._f.onChange&&_._f.onChange(c);const yt=H(h,rt,Oe),Cs=!Ee(yt)||vt;if(!Oe&&f.state.next({name:h,type:c.type,values:de(o)}),Rt)return(y.isValid||R.isValid)&&(e.mode==="onBlur"?Oe&&U():Oe||U()),Cs&&f.state.next({name:h,...vt?{}:yt});if(!Oe&&vt&&f.state.next({...s}),e.resolver){const{errors:Vt}=await _e([h]);if(b(rt),k){const Ss=Dr(s.errors,a,h),ns=Dr(Vt,a,Ss.name||h);W=ns.error,h=ns.name,we=Ee(Vt)}}else ee([h],!0),W=(await Ir(_,d.disabled,o,Q,e.shouldUseNativeValidation))[h],ee([h]),b(rt),k&&(W?we=!1:(y.isValid||R.isValid)&&(we=await ce(a,!0)));k&&(_._f.deps&&Ge(_._f.deps),te(h,we,W,yt))}},Be=(c,u)=>{if(j(s.errors,u)&&c.focus)return c.focus(),1},Ge=async(c,u={})=>{let h,k;const _=Wt(c);if(e.resolver){const b=await ie(ae(c)?c:_);h=Ee(b),k=c?!_.some(S=>j(b,S)):h}else c?(k=(await Promise.all(_.map(async b=>{const S=j(a,b);return await ce(S&&S._f?{[b]:S}:S)}))).every(Boolean),!(!k&&!s.isValid)&&U()):k=h=await ce(a);return f.state.next({...!We(c)||(y.isValid||R.isValid)&&h!==s.isValid?{}:{name:c},...e.resolver||!c?{isValid:h}:{},errors:s.errors}),u.shouldFocus&&!k&&Ht(a,Be,c?_:d.mount),k},gt=c=>{const u={...l.mount?o:n};return ae(c)?u:We(c)?j(u,c):c.map(h=>j(u,h))},Et=(c,u)=>({invalid:!!j((u||s).errors,c),isDirty:!!j((u||s).dirtyFields,c),error:j((u||s).errors,c),isValidating:!!j(s.validatingFields,c),isTouched:!!j((u||s).touchedFields,c)}),Xt=c=>{c&&Wt(c).forEach(u=>le(s.errors,u)),f.state.next({errors:c?s.errors:{}})},G=(c,u,h)=>{const k=(j(a,c,{_f:{}})._f||{}).ref,_=j(s.errors,c)||{},{ref:b,message:S,type:Z,...W}=_;q(s.errors,c,{...W,...u,ref:k}),f.state.next({name:c,errors:s.errors,isValid:!1}),h&&h.shouldFocus&&k&&k.focus&&k.focus()},es=(c,u)=>Ke(c)?f.state.subscribe({next:h=>"values"in h&&c(g(void 0,u),h)}):g(c,u,!0),ts=c=>f.state.subscribe({next:u=>{hn(c.name,u.name,c.exact)&&un(u,c.formState||y,Te,c.reRenderRoot)&&c.callback({values:{...o},...s,...u,defaultValues:n})}}).unsubscribe,ss=c=>(l.mount=!0,R={...R,...c.formState},ts({...c,formState:R})),et=(c,u={})=>{for(const h of c?Wt(c):d.mount)d.mount.delete(h),d.array.delete(h),u.keepValue||(le(a,h),le(o,h)),!u.keepError&&le(s.errors,h),!u.keepDirty&&le(s.dirtyFields,h),!u.keepTouched&&le(s.touchedFields,h),!u.keepIsValidating&&le(s.validatingFields,h),!e.shouldUnregister&&!u.keepDefaultValue&&le(n,h);f.state.next({values:de(o)}),f.state.next({...s,...u.keepDirty?{isDirty:Ne()}:{}}),!u.keepIsValid&&U()},Tt=({disabled:c,name:u})=>{(Ve(c)&&l.mount||c||d.disabled.has(u))&&(c?d.disabled.add(u):d.disabled.delete(u))},ut=(c,u={})=>{let h=j(a,c);const k=Ve(u.disabled)||Ve(e.disabled);return q(a,c,{...h||{},_f:{...h&&h._f?h._f:{ref:{name:c}},name:c,mount:!0,...u}}),d.mount.add(c),h?Tt({disabled:Ve(u.disabled)?u.disabled:e.disabled,name:c}):J(c,!0,u.value),{...k?{disabled:u.disabled||e.disabled}:{},...e.progressive?{required:!!u.required,min:Ut(u.min),max:Ut(u.max),minLength:Ut(u.minLength),maxLength:Ut(u.maxLength),pattern:Ut(u.pattern)}:{},name:c,onChange:he,onBlur:he,ref:_=>{if(_){ut(c,u),h=j(a,c);const b=ae(_.value)&&_.querySelectorAll&&_.querySelectorAll("input,select,textarea")[0]||_,S=an(b),Z=h._f.refs||[];if(S?Z.find(W=>W===b):b===h._f.ref)return;q(a,c,{_f:{...h._f,...S?{refs:[...Z.filter(Es),b,...Array.isArray(j(n,c))?[{}]:[]],ref:{type:b.type,name:c}}:{ref:b}}}),J(c,!1,void 0,b)}else h=j(a,c,{}),h._f&&(h._f.mount=!1),(e.shouldUnregister||u.shouldUnregister)&&!(oa(d.array,c)&&l.action)&&d.unMount.add(c)}}},pt=()=>e.shouldFocusError&&Ht(a,Be,d.mount),rs=c=>{Ve(c)&&(f.state.next({disabled:c}),Ht(a,(u,h)=>{const k=j(a,h);k&&(u.disabled=k._f.disabled||c,Array.isArray(k._f.refs)&&k._f.refs.forEach(_=>{_.disabled=k._f.disabled||c}))},0,!1))},ht=(c,u)=>async h=>{let k;h&&(h.preventDefault&&h.preventDefault(),h.persist&&h.persist());let _=de(o);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:b,values:S}=await _e();s.errors=b,_=de(S)}else await ce(a);if(d.disabled.size)for(const b of d.disabled)le(_,b);if(le(s.errors,"root"),Ee(s.errors)){f.state.next({errors:{}});try{await c(_,h)}catch(b){k=b}}else u&&await u({...s.errors},h),pt(),setTimeout(pt);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ee(s.errors)&&!k,submitCount:s.submitCount+1,errors:s.errors}),k)throw k},tt=(c,u={})=>{j(a,c)&&(ae(u.defaultValue)?P(c,de(j(n,c))):(P(c,u.defaultValue),q(n,c,de(u.defaultValue))),u.keepTouched||le(s.touchedFields,c),u.keepDirty||(le(s.dirtyFields,c),s.isDirty=u.defaultValue?Ne(c,de(j(n,c))):Ne()),u.keepError||(le(s.errors,c),y.isValid&&U()),f.state.next({...s}))},st=(c,u={})=>{const h=c?de(c):n,k=de(h),_=Ee(c),b=_?n:k;if(u.keepDefaultValues||(n=h),!u.keepValues){if(u.keepDirtyValues){const S=new Set([...d.mount,...Object.keys(Zt(n,o))]);for(const Z of Array.from(S))j(s.dirtyFields,Z)?q(b,Z,j(o,Z)):P(Z,j(b,Z))}else{if(Ws&&ae(c))for(const S of d.mount){const Z=j(a,S);if(Z&&Z._f){const W=Array.isArray(Z._f.refs)?Z._f.refs[0]:Z._f.ref;if(fs(W)){const we=W.closest("form");if(we){we.reset();break}}}}if(u.keepFieldsRef)for(const S of d.mount)P(S,j(b,S));else a={}}o=e.shouldUnregister?u.keepDefaultValues?de(n):{}:de(b),f.array.next({values:{...b}}),f.state.next({values:{...b}})}d={mount:u.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!y.isValid||!!u.keepIsValid||!!u.keepDirtyValues,l.watch=!!e.shouldUnregister,f.state.next({submitCount:u.keepSubmitCount?s.submitCount:0,isDirty:_?!1:u.keepDirty?s.isDirty:!!(u.keepDefaultValues&&!Qe(c,n)),isSubmitted:u.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:_?{}:u.keepDirtyValues?u.keepDefaultValues&&o?Zt(n,o):s.dirtyFields:u.keepDefaultValues&&c?Zt(n,c):u.keepDirty?s.dirtyFields:{},touchedFields:u.keepTouched?s.touchedFields:{},errors:u.keepErrors?s.errors:{},isSubmitSuccessful:u.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Mt=(c,u)=>st(Ke(c)?c(o):c,u),ws=(c,u={})=>{const h=j(a,c),k=h&&h._f;if(k){const _=k.refs?k.refs[0]:k.ref;_.focus&&(_.focus(),u.shouldSelect&&Ke(_.select)&&_.select())}},Te=c=>{s={...s,...c}},as={control:{register:ut,unregister:et,getFieldState:Et,handleSubmit:ht,setError:G,_subscribe:ts,_runSchema:_e,_focusError:pt,_getWatch:g,_getDirty:Ne,_setValid:U,_setFieldArray:$e,_setDisabledField:Tt,_setErrors:X,_getFieldArray:V,_reset:st,_resetDefaultValues:()=>Ke(e.defaultValues)&&e.defaultValues().then(c=>{Mt(c,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:ke,_disableForm:rs,_subjects:f,_proxyFormState:y,get _fields(){return a},get _formValues(){return o},get _state(){return l},set _state(c){l=c},get _defaultValues(){return n},get _names(){return d},set _names(c){d=c},get _formState(){return s},get _options(){return e},set _options(c){e={...e,...c}}},subscribe:ss,trigger:Ge,register:ut,handleSubmit:ht,watch:es,setValue:P,getValues:gt,reset:Mt,resetField:tt,clearErrors:Xt,unregister:et,setError:G,setFocus:ws,getFieldState:Et};return{...as,formControl:as}}function vn(t={}){const e=I.useRef(void 0),s=I.useRef(void 0),[a,n]=I.useState({isDirty:!1,isValidating:!1,isLoading:Ke(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ke(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:a},t.defaultValues&&!Ke(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...d}=pn(t);e.current={...d,formState:a}}const o=e.current.control;return o._options=t,Js(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0});return n(d=>({...d,isReady:!0})),o._formState.isReady=!0,l},[o]),I.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),I.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),I.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),I.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),I.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==a.isDirty&&o._subjects.state.next({isDirty:l})}},[o,a.isDirty]),I.useEffect(()=>{t.values&&!Qe(t.values,s.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),s.current=t.values,n(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),I.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=la(a,o),e.current}const Pr=Xa,pa=L.createContext({}),je=({...t})=>r.jsx(pa.Provider,{value:{name:t.name},children:r.jsx(rn,{...t})}),Ns=()=>{const t=L.useContext(pa),e=L.useContext(va),{getFieldState:s,formState:a}=ks(),n=s(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},va=L.createContext({}),ge=L.forwardRef(({className:t,...e},s)=>{const a=L.useId();return r.jsx(va.Provider,{value:{id:a},children:r.jsx("div",{ref:s,className:be("space-y-2",t),...e})})});ge.displayName="FormItem";const pe=L.forwardRef(({className:t,...e},s)=>{const{error:a,formItemId:n}=Ns();return r.jsx(Re,{ref:s,className:be(a&&"text-destructive",t),htmlFor:n,...e})});pe.displayName="FormLabel";const ve=L.forwardRef(({...t},e)=>{const{error:s,formItemId:a,formDescriptionId:n,formMessageId:o}=Ns();return r.jsx(Na,{ref:e,id:a,"aria-describedby":s?`${n} ${o}`:`${n}`,"aria-invalid":!!s,...t})});ve.displayName="FormControl";const yn=L.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:a}=Ns();return r.jsx("p",{ref:s,id:a,className:be("text-sm text-muted-foreground",t),...e})});yn.displayName="FormDescription";const ye=L.forwardRef(({className:t,children:e,...s},a)=>{const{error:n,formMessageId:o}=Ns(),l=n?String(n==null?void 0:n.message):e;return l?r.jsx("p",{ref:a,id:o,className:be("text-sm font-medium text-destructive",t),...s,children:l}):null});ye.displayName="FormMessage";const Lr=(t,e,s)=>{if(t&&"reportValidity"in t){const a=j(s,e);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},ya=(t,e)=>{for(const s in e.fields){const a=e.fields[s];a&&a.ref&&"reportValidity"in a.ref?Lr(a.ref,s,t):a.refs&&a.refs.forEach(n=>Lr(n,s,t))}},bn=(t,e)=>{e.shouldUseNativeValidation&&ya(t,e);const s={};for(const a in t){const n=j(e.fields,a),o=Object.assign(t[a]||{},{ref:n&&n.ref});if(_n(e.names||Object.keys(t),a)){const l=Object.assign({},j(s,a));q(l,"root",o),q(s,a,l)}else q(s,a,o)}return s},_n=(t,e)=>t.some(s=>s.startsWith(e+"."));var jn=function(t,e){for(var s={};t.length;){var a=t[0],n=a.code,o=a.message,l=a.path.join(".");if(!s[l])if("unionErrors"in a){var d=a.unionErrors[0].errors[0];s[l]={message:d.message,type:d.code}}else s[l]={message:o,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(y){return y.errors.forEach(function(R){return t.push(R)})}),e){var x=s[l].types,m=x&&x[a.code];s[l]=da(l,e,s,n,m?[].concat(m,a.message):a.message)}t.shift()}return s},kn=function(t,e,s){return s===void 0&&(s={}),function(a,n,o){try{return Promise.resolve(function(l,d){try{var x=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](a,e)).then(function(m){return o.shouldUseNativeValidation&&ya({},o),{errors:{},values:s.raw?a:m}})}catch(m){return d(m)}return x&&x.then?x.then(void 0,d):x}(0,function(l){if(function(d){return Array.isArray(d==null?void 0:d.errors)}(l))return{values:{},errors:bn(jn(l.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}}},z;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function s(n){throw new Error}t.assertNever=s,t.arrayToEnum=n=>{const o={};for(const l of n)o[l]=l;return o},t.getValidEnumValues=n=>{const o=t.objectKeys(n).filter(d=>typeof n[n[d]]!="number"),l={};for(const d of o)l[d]=n[d];return t.objectValues(l)},t.objectValues=n=>t.objectKeys(n).map(function(o){return n[o]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const o=[];for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&o.push(l);return o},t.find=(n,o)=>{for(const l of n)if(o(l))return l},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,o=" | "){return n.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}t.joinValues=a,t.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(z||(z={}));var $r;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})($r||($r={}));const w=z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),it=t=>{switch(typeof t){case"undefined":return w.undefined;case"string":return w.string;case"number":return Number.isNaN(t)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(t)?w.array:t===null?w.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?w.promise:typeof Map<"u"&&t instanceof Map?w.map:typeof Set<"u"&&t instanceof Set?w.set:typeof Date<"u"&&t instanceof Date?w.date:w.object;default:return w.unknown}},v=z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(o){return o.message},a={_errors:[]},n=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(n);else if(l.code==="invalid_return_type")n(l.returnTypeError);else if(l.code==="invalid_arguments")n(l.argumentsError);else if(l.path.length===0)a._errors.push(s(l));else{let d=a,x=0;for(;x<l.path.length;){const m=l.path[x];x===l.path.length-1?(d[m]=d[m]||{_errors:[]},d[m]._errors.push(s(l))):d[m]=d[m]||{_errors:[]},d=d[m],x++}}};return n(this),a}static assert(e){if(!(e instanceof Xe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},a=[];for(const n of this.issues)if(n.path.length>0){const o=n.path[0];s[o]=s[o]||[],s[o].push(e(n))}else a.push(e(n));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}Xe.create=t=>new Xe(t);const zs=(t,e)=>{let s;switch(t.code){case v.invalid_type:t.received===w.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case v.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,z.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:s=`Unrecognized key(s) in object: ${z.joinValues(t.keys,", ")}`;break;case v.invalid_union:s="Invalid input";break;case v.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${z.joinValues(t.options)}`;break;case v.invalid_enum_value:s=`Invalid enum value. Expected ${z.joinValues(t.options)}, received '${t.received}'`;break;case v.invalid_arguments:s="Invalid function arguments";break;case v.invalid_return_type:s="Invalid function return type";break;case v.invalid_date:s="Invalid date";break;case v.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:z.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case v.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case v.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case v.custom:s="Invalid input";break;case v.invalid_intersection_types:s="Intersection results could not be merged";break;case v.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case v.not_finite:s="Number must be finite";break;default:s=e.defaultError,z.assertNever(t)}return{message:s}};let Nn=zs;function wn(){return Nn}const Cn=t=>{const{data:e,path:s,errorMaps:a,issueData:n}=t,o=[...s,...n.path||[]],l={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let d="";const x=a.filter(m=>!!m).slice().reverse();for(const m of x)d=m(l,{data:e,defaultError:d}).message;return{...n,path:o,message:d}};function N(t,e){const s=wn(),a=Cn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===zs?void 0:zs].filter(n=>!!n)});t.common.issues.push(a)}class De{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const a=[];for(const n of s){if(n.status==="aborted")return E;n.status==="dirty"&&e.dirty(),a.push(n.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,s){const a=[];for(const n of s){const o=await n.key,l=await n.value;a.push({key:o,value:l})}return De.mergeObjectSync(e,a)}static mergeObjectSync(e,s){const a={};for(const n of s){const{key:o,value:l}=n;if(o.status==="aborted"||l.status==="aborted")return E;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||n.alwaysSet)&&(a[o.value]=l.value)}return{status:e.value,value:a}}}const E=Object.freeze({status:"aborted"}),Kt=t=>({status:"dirty",value:t}),Le=t=>({status:"valid",value:t}),zr=t=>t.status==="aborted",Zr=t=>t.status==="dirty",Ct=t=>t.status==="valid",ps=t=>typeof Promise<"u"&&t instanceof Promise;var C;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(C||(C={}));class ct{constructor(e,s,a,n){this._cachedPath=[],this.parent=e,this.data=s,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ur=(t,e)=>{if(Ct(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Xe(t.common.issues);return this._error=s,this._error}}};function O(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:a,description:n}=t;if(e&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(l,d)=>{const{message:x}=t;return l.code==="invalid_enum_value"?{message:x??d.defaultError}:typeof d.data>"u"?{message:x??a??d.defaultError}:l.code!=="invalid_type"?{message:d.defaultError}:{message:x??s??d.defaultError}},description:n}}class ${get description(){return this._def.description}_getType(e){return it(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new De,ctx:{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(ps(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const a=this.safeParse(e,s);if(a.success)return a.data;throw a.error}safeParse(e,s){const a={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},n=this._parseSync({data:e,path:a.path,parent:a});return Ur(a,n)}"~validate"(e){var a,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:s});return Ct(o)?{value:o.value}:{issues:s.common.issues}}catch(o){(n=(a=o==null?void 0:o.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(o=>Ct(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(e,s){const a=await this.safeParseAsync(e,s);if(a.success)return a.data;throw a.error}async safeParseAsync(e,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},n=this._parse({data:e,path:a.path,parent:a}),o=await(ps(n)?n:Promise.resolve(n));return Ur(a,o)}refine(e,s){const a=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,o)=>{const l=e(n),d=()=>o.addIssue({code:v.custom,...a(n)});return typeof Promise<"u"&&l instanceof Promise?l.then(x=>x?!0:(d(),!1)):l?!0:(d(),!1)})}refinement(e,s){return this._refinement((a,n)=>e(a)?!0:(n.addIssue(typeof s=="function"?s(a,n):s),!1))}_refinement(e){return new Ft({schema:this,typeName:T.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return lt.create(this,this._def)}nullable(){return At.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return He.create(this)}promise(){return _s.create(this,this._def)}or(e){return ys.create([this,e],this._def)}and(e){return bs.create(this,e,this._def)}transform(e){return new Ft({...O(this._def),schema:this,typeName:T.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Ks({...O(this._def),innerType:this,defaultValue:s,typeName:T.ZodDefault})}brand(){return new Gn({typeName:T.ZodBranded,type:this,...O(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Bs({...O(this._def),innerType:this,catchValue:s,typeName:T.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return er.create(this,e)}readonly(){return qs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Sn=/^c[^\s-]{8,}$/i,Fn=/^[0-9a-z]+$/,An=/^[0-9A-HJKMNP-TV-Z]{26}$/i,En=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tn=/^[a-z0-9_-]{21}$/i,Mn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Rn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Dn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ts;const On=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,In=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ln=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$n=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ba="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Zn=new RegExp(`^${ba}$`);function _a(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function Un(t){return new RegExp(`^${_a(t)}$`)}function Kn(t){let e=`${ba}T${_a(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function Bn(t,e){return!!((e==="v4"||!e)&&On.test(t)||(e==="v6"||!e)&&Pn.test(t))}function qn(t,e){if(!Mn.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const a=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function Wn(t,e){return!!((e==="v4"||!e)&&In.test(t)||(e==="v6"||!e)&&Ln.test(t))}class ot extends ${_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){const o=this._getOrReturnCtx(e);return N(o,{code:v.invalid_type,expected:w.string,received:o.parsedType}),E}const a=new De;let n;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(n=this._getOrReturnCtx(e,n),N(n,{code:v.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="max")e.data.length>o.value&&(n=this._getOrReturnCtx(e,n),N(n,{code:v.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if(o.kind==="length"){const l=e.data.length>o.value,d=e.data.length<o.value;(l||d)&&(n=this._getOrReturnCtx(e,n),l?N(n,{code:v.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&N(n,{code:v.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),a.dirty())}else if(o.kind==="email")Vn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"email",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="emoji")Ts||(Ts=new RegExp(Dn,"u")),Ts.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"emoji",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="uuid")En.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"uuid",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="nanoid")Tn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"nanoid",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid")Sn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"cuid",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid2")Fn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"cuid2",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="ulid")An.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"ulid",code:v.invalid_string,message:o.message}),a.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),N(n,{validation:"url",code:v.invalid_string,message:o.message}),a.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"regex",code:v.invalid_string,message:o.message}),a.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),a.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty()):o.kind==="datetime"?Kn(o).test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:"datetime",message:o.message}),a.dirty()):o.kind==="date"?Zn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:"date",message:o.message}),a.dirty()):o.kind==="time"?Un(o).test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{code:v.invalid_string,validation:"time",message:o.message}),a.dirty()):o.kind==="duration"?Rn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"duration",code:v.invalid_string,message:o.message}),a.dirty()):o.kind==="ip"?Bn(e.data,o.version)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"ip",code:v.invalid_string,message:o.message}),a.dirty()):o.kind==="jwt"?qn(e.data,o.alg)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"jwt",code:v.invalid_string,message:o.message}),a.dirty()):o.kind==="cidr"?Wn(e.data,o.version)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"cidr",code:v.invalid_string,message:o.message}),a.dirty()):o.kind==="base64"?$n.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"base64",code:v.invalid_string,message:o.message}),a.dirty()):o.kind==="base64url"?zn.test(e.data)||(n=this._getOrReturnCtx(e,n),N(n,{validation:"base64url",code:v.invalid_string,message:o.message}),a.dirty()):z.assertNever(o);return{status:a.value,value:e.data}}_regex(e,s,a){return this.refinement(n=>e.test(n),{validation:s,code:v.invalid_string,...C.errToObj(a)})}_addCheck(e){return new ot({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...C.errToObj(e)})}url(e){return this._addCheck({kind:"url",...C.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...C.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...C.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...C.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...C.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...C.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...C.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...C.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...C.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...C.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...C.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...C.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...C.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...C.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...C.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...C.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...C.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...C.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...C.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...C.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...C.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...C.errToObj(s)})}nonempty(e){return this.min(1,C.errToObj(e))}trim(){return new ot({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ot({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ot({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}ot.create=t=>new ot({checks:[],typeName:T.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...O(t)});function Hn(t,e){const s=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,n=s>a?s:a,o=Number.parseInt(t.toFixed(n).replace(".","")),l=Number.parseInt(e.toFixed(n).replace(".",""));return o%l/10**n}class Gt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){const o=this._getOrReturnCtx(e);return N(o,{code:v.invalid_type,expected:w.number,received:o.parsedType}),E}let a;const n=new De;for(const o of this._def.checks)o.kind==="int"?z.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:v.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?Hn(e.data,o.value)!==0&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:v.not_finite,message:o.message}),n.dirty()):z.assertNever(o);return{status:n.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,C.toString(s))}gt(e,s){return this.setLimit("min",e,!1,C.toString(s))}lte(e,s){return this.setLimit("max",e,!0,C.toString(s))}lt(e,s){return this.setLimit("max",e,!1,C.toString(s))}setLimit(e,s,a,n){return new Gt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:C.toString(n)}]})}_addCheck(e){return new Gt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:C.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:C.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:C.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:C.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:C.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:C.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:C.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:C.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:C.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&z.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Gt.create=t=>new Gt({checks:[],typeName:T.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...O(t)});class Yt extends ${constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==w.bigint)return this._getInvalidInput(e);let a;const n=new De;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),N(a,{code:v.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):z.assertNever(o);return{status:n.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return N(s,{code:v.invalid_type,expected:w.bigint,received:s.parsedType}),E}gte(e,s){return this.setLimit("min",e,!0,C.toString(s))}gt(e,s){return this.setLimit("min",e,!1,C.toString(s))}lte(e,s){return this.setLimit("max",e,!0,C.toString(s))}lt(e,s){return this.setLimit("max",e,!1,C.toString(s))}setLimit(e,s,a,n){return new Yt({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:C.toString(n)}]})}_addCheck(e){return new Yt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:C.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:C.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:C.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:C.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:C.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Yt.create=t=>new Yt({checks:[],typeName:T.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...O(t)});class Zs extends ${_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==w.boolean){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.boolean,received:a.parsedType}),E}return Le(e.data)}}Zs.create=t=>new Zs({typeName:T.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...O(t)});class vs extends ${_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){const o=this._getOrReturnCtx(e);return N(o,{code:v.invalid_type,expected:w.date,received:o.parsedType}),E}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return N(o,{code:v.invalid_date}),E}const a=new De;let n;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(n=this._getOrReturnCtx(e,n),N(n,{code:v.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),a.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(n=this._getOrReturnCtx(e,n),N(n,{code:v.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),a.dirty()):z.assertNever(o);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vs({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:C.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:C.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}vs.create=t=>new vs({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:T.ZodDate,...O(t)});class Kr extends ${_parse(e){if(this._getType(e)!==w.symbol){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.symbol,received:a.parsedType}),E}return Le(e.data)}}Kr.create=t=>new Kr({typeName:T.ZodSymbol,...O(t)});class Br extends ${_parse(e){if(this._getType(e)!==w.undefined){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.undefined,received:a.parsedType}),E}return Le(e.data)}}Br.create=t=>new Br({typeName:T.ZodUndefined,...O(t)});class qr extends ${_parse(e){if(this._getType(e)!==w.null){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.null,received:a.parsedType}),E}return Le(e.data)}}qr.create=t=>new qr({typeName:T.ZodNull,...O(t)});class Wr extends ${constructor(){super(...arguments),this._any=!0}_parse(e){return Le(e.data)}}Wr.create=t=>new Wr({typeName:T.ZodAny,...O(t)});class Hr extends ${constructor(){super(...arguments),this._unknown=!0}_parse(e){return Le(e.data)}}Hr.create=t=>new Hr({typeName:T.ZodUnknown,...O(t)});class dt extends ${_parse(e){const s=this._getOrReturnCtx(e);return N(s,{code:v.invalid_type,expected:w.never,received:s.parsedType}),E}}dt.create=t=>new dt({typeName:T.ZodNever,...O(t)});class Gr extends ${_parse(e){if(this._getType(e)!==w.undefined){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.void,received:a.parsedType}),E}return Le(e.data)}}Gr.create=t=>new Gr({typeName:T.ZodVoid,...O(t)});class He extends ${_parse(e){const{ctx:s,status:a}=this._processInputParams(e),n=this._def;if(s.parsedType!==w.array)return N(s,{code:v.invalid_type,expected:w.array,received:s.parsedType}),E;if(n.exactLength!==null){const l=s.data.length>n.exactLength.value,d=s.data.length<n.exactLength.value;(l||d)&&(N(s,{code:l?v.too_big:v.too_small,minimum:d?n.exactLength.value:void 0,maximum:l?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(N(s,{code:v.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(N(s,{code:v.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((l,d)=>n.type._parseAsync(new ct(s,l,s.path,d)))).then(l=>De.mergeArray(a,l));const o=[...s.data].map((l,d)=>n.type._parseSync(new ct(s,l,s.path,d)));return De.mergeArray(a,o)}get element(){return this._def.type}min(e,s){return new He({...this._def,minLength:{value:e,message:C.toString(s)}})}max(e,s){return new He({...this._def,maxLength:{value:e,message:C.toString(s)}})}length(e,s){return new He({...this._def,exactLength:{value:e,message:C.toString(s)}})}nonempty(e){return this.min(1,e)}}He.create=(t,e)=>new He({type:t,minLength:null,maxLength:null,exactLength:null,typeName:T.ZodArray,...O(e)});function Nt(t){if(t instanceof re){const e={};for(const s in t.shape){const a=t.shape[s];e[s]=lt.create(Nt(a))}return new re({...t._def,shape:()=>e})}else return t instanceof He?new He({...t._def,type:Nt(t.element)}):t instanceof lt?lt.create(Nt(t.unwrap())):t instanceof At?At.create(Nt(t.unwrap())):t instanceof xt?xt.create(t.items.map(e=>Nt(e))):t}class re extends ${constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=z.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==w.object){const m=this._getOrReturnCtx(e);return N(m,{code:v.invalid_type,expected:w.object,received:m.parsedType}),E}const{status:a,ctx:n}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),d=[];if(!(this._def.catchall instanceof dt&&this._def.unknownKeys==="strip"))for(const m in n.data)l.includes(m)||d.push(m);const x=[];for(const m of l){const y=o[m],R=n.data[m];x.push({key:{status:"valid",value:m},value:y._parse(new ct(n,R,n.path,m)),alwaysSet:m in n.data})}if(this._def.catchall instanceof dt){const m=this._def.unknownKeys;if(m==="passthrough")for(const y of d)x.push({key:{status:"valid",value:y},value:{status:"valid",value:n.data[y]}});else if(m==="strict")d.length>0&&(N(n,{code:v.unrecognized_keys,keys:d}),a.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const y of d){const R=n.data[y];x.push({key:{status:"valid",value:y},value:m._parse(new ct(n,R,n.path,y)),alwaysSet:y in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const m=[];for(const y of x){const R=await y.key,f=await y.value;m.push({key:R,value:f,alwaysSet:y.alwaysSet})}return m}).then(m=>De.mergeObjectSync(a,m)):De.mergeObjectSync(a,x)}get shape(){return this._def.shape()}strict(e){return C.errToObj,new re({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,a)=>{var o,l;const n=((l=(o=this._def).errorMap)==null?void 0:l.call(o,s,a).message)??a.defaultError;return s.code==="unrecognized_keys"?{message:C.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new re({...this._def,unknownKeys:"strip"})}passthrough(){return new re({...this._def,unknownKeys:"passthrough"})}extend(e){return new re({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new re({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:T.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new re({...this._def,catchall:e})}pick(e){const s={};for(const a of z.objectKeys(e))e[a]&&this.shape[a]&&(s[a]=this.shape[a]);return new re({...this._def,shape:()=>s})}omit(e){const s={};for(const a of z.objectKeys(this.shape))e[a]||(s[a]=this.shape[a]);return new re({...this._def,shape:()=>s})}deepPartial(){return Nt(this)}partial(e){const s={};for(const a of z.objectKeys(this.shape)){const n=this.shape[a];e&&!e[a]?s[a]=n:s[a]=n.optional()}return new re({...this._def,shape:()=>s})}required(e){const s={};for(const a of z.objectKeys(this.shape))if(e&&!e[a])s[a]=this.shape[a];else{let o=this.shape[a];for(;o instanceof lt;)o=o._def.innerType;s[a]=o}return new re({...this._def,shape:()=>s})}keyof(){return ja(z.objectKeys(this.shape))}}re.create=(t,e)=>new re({shape:()=>t,unknownKeys:"strip",catchall:dt.create(),typeName:T.ZodObject,...O(e)});re.strictCreate=(t,e)=>new re({shape:()=>t,unknownKeys:"strict",catchall:dt.create(),typeName:T.ZodObject,...O(e)});re.lazycreate=(t,e)=>new re({shape:t,unknownKeys:"strip",catchall:dt.create(),typeName:T.ZodObject,...O(e)});class ys extends ${_parse(e){const{ctx:s}=this._processInputParams(e),a=this._def.options;function n(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return s.common.issues.push(...d.ctx.common.issues),d.result;const l=o.map(d=>new Xe(d.ctx.common.issues));return N(s,{code:v.invalid_union,unionErrors:l}),E}if(s.common.async)return Promise.all(a.map(async o=>{const l={...s,common:{...s.common,issues:[]},parent:null};return{result:await o._parseAsync({data:s.data,path:s.path,parent:l}),ctx:l}})).then(n);{let o;const l=[];for(const x of a){const m={...s,common:{...s.common,issues:[]},parent:null},y=x._parseSync({data:s.data,path:s.path,parent:m});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:m}),m.common.issues.length&&l.push(m.common.issues)}if(o)return s.common.issues.push(...o.ctx.common.issues),o.result;const d=l.map(x=>new Xe(x));return N(s,{code:v.invalid_union,unionErrors:d}),E}}get options(){return this._def.options}}ys.create=(t,e)=>new ys({options:t,typeName:T.ZodUnion,...O(e)});function Us(t,e){const s=it(t),a=it(e);if(t===e)return{valid:!0,data:t};if(s===w.object&&a===w.object){const n=z.objectKeys(e),o=z.objectKeys(t).filter(d=>n.indexOf(d)!==-1),l={...t,...e};for(const d of o){const x=Us(t[d],e[d]);if(!x.valid)return{valid:!1};l[d]=x.data}return{valid:!0,data:l}}else if(s===w.array&&a===w.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let o=0;o<t.length;o++){const l=t[o],d=e[o],x=Us(l,d);if(!x.valid)return{valid:!1};n.push(x.data)}return{valid:!0,data:n}}else return s===w.date&&a===w.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bs extends ${_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=(o,l)=>{if(zr(o)||zr(l))return E;const d=Us(o.value,l.value);return d.valid?((Zr(o)||Zr(l))&&s.dirty(),{status:s.value,value:d.data}):(N(a,{code:v.invalid_intersection_types}),E)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([o,l])=>n(o,l)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}bs.create=(t,e,s)=>new bs({left:t,right:e,typeName:T.ZodIntersection,...O(s)});class xt extends ${_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==w.array)return N(a,{code:v.invalid_type,expected:w.array,received:a.parsedType}),E;if(a.data.length<this._def.items.length)return N(a,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),E;!this._def.rest&&a.data.length>this._def.items.length&&(N(a,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const o=[...a.data].map((l,d)=>{const x=this._def.items[d]||this._def.rest;return x?x._parse(new ct(a,l,a.path,d)):null}).filter(l=>!!l);return a.common.async?Promise.all(o).then(l=>De.mergeArray(s,l)):De.mergeArray(s,o)}get items(){return this._def.items}rest(e){return new xt({...this._def,rest:e})}}xt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xt({items:t,typeName:T.ZodTuple,rest:null,...O(e)})};class Yr extends ${get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==w.map)return N(a,{code:v.invalid_type,expected:w.map,received:a.parsedType}),E;const n=this._def.keyType,o=this._def.valueType,l=[...a.data.entries()].map(([d,x],m)=>({key:n._parse(new ct(a,d,a.path,[m,"key"])),value:o._parse(new ct(a,x,a.path,[m,"value"]))}));if(a.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const x of l){const m=await x.key,y=await x.value;if(m.status==="aborted"||y.status==="aborted")return E;(m.status==="dirty"||y.status==="dirty")&&s.dirty(),d.set(m.value,y.value)}return{status:s.value,value:d}})}else{const d=new Map;for(const x of l){const m=x.key,y=x.value;if(m.status==="aborted"||y.status==="aborted")return E;(m.status==="dirty"||y.status==="dirty")&&s.dirty(),d.set(m.value,y.value)}return{status:s.value,value:d}}}}Yr.create=(t,e,s)=>new Yr({valueType:e,keyType:t,typeName:T.ZodMap,...O(s)});class Jt extends ${_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==w.set)return N(a,{code:v.invalid_type,expected:w.set,received:a.parsedType}),E;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(N(a,{code:v.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(N(a,{code:v.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const o=this._def.valueType;function l(x){const m=new Set;for(const y of x){if(y.status==="aborted")return E;y.status==="dirty"&&s.dirty(),m.add(y.value)}return{status:s.value,value:m}}const d=[...a.data.values()].map((x,m)=>o._parse(new ct(a,x,a.path,m)));return a.common.async?Promise.all(d).then(x=>l(x)):l(d)}min(e,s){return new Jt({...this._def,minSize:{value:e,message:C.toString(s)}})}max(e,s){return new Jt({...this._def,maxSize:{value:e,message:C.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}Jt.create=(t,e)=>new Jt({valueType:t,minSize:null,maxSize:null,typeName:T.ZodSet,...O(e)});class Jr extends ${get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Jr.create=(t,e)=>new Jr({getter:t,typeName:T.ZodLazy,...O(e)});class Qr extends ${_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return N(s,{received:s.data,code:v.invalid_literal,expected:this._def.value}),E}return{status:"valid",value:e.data}}get value(){return this._def.value}}Qr.create=(t,e)=>new Qr({value:t,typeName:T.ZodLiteral,...O(e)});function ja(t,e){return new St({values:t,typeName:T.ZodEnum,...O(e)})}class St extends ${_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),a=this._def.values;return N(s,{expected:z.joinValues(a),received:s.parsedType,code:v.invalid_type}),E}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),a=this._def.values;return N(s,{received:s.data,code:v.invalid_enum_value,options:a}),E}return Le(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return St.create(e,{...this._def,...s})}exclude(e,s=this._def){return St.create(this.options.filter(a=>!e.includes(a)),{...this._def,...s})}}St.create=ja;class Xr extends ${_parse(e){const s=z.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==w.string&&a.parsedType!==w.number){const n=z.objectValues(s);return N(a,{expected:z.joinValues(n),received:a.parsedType,code:v.invalid_type}),E}if(this._cache||(this._cache=new Set(z.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=z.objectValues(s);return N(a,{received:a.data,code:v.invalid_enum_value,options:n}),E}return Le(e.data)}get enum(){return this._def.values}}Xr.create=(t,e)=>new Xr({values:t,typeName:T.ZodNativeEnum,...O(e)});class _s extends ${unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==w.promise&&s.common.async===!1)return N(s,{code:v.invalid_type,expected:w.promise,received:s.parsedType}),E;const a=s.parsedType===w.promise?s.data:Promise.resolve(s.data);return Le(a.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}_s.create=(t,e)=>new _s({type:t,typeName:T.ZodPromise,...O(e)});class Ft extends ${innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===T.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=this._def.effect||null,o={addIssue:l=>{N(a,l),l.fatal?s.abort():s.dirty()},get path(){return a.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){const l=n.transform(a.data,o);if(a.common.async)return Promise.resolve(l).then(async d=>{if(s.value==="aborted")return E;const x=await this._def.schema._parseAsync({data:d,path:a.path,parent:a});return x.status==="aborted"?E:x.status==="dirty"||s.value==="dirty"?Kt(x.value):x});{if(s.value==="aborted")return E;const d=this._def.schema._parseSync({data:l,path:a.path,parent:a});return d.status==="aborted"?E:d.status==="dirty"||s.value==="dirty"?Kt(d.value):d}}if(n.type==="refinement"){const l=d=>{const x=n.refinement(d,o);if(a.common.async)return Promise.resolve(x);if(x instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(a.common.async===!1){const d=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return d.status==="aborted"?E:(d.status==="dirty"&&s.dirty(),l(d.value),{status:s.value,value:d.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(d=>d.status==="aborted"?E:(d.status==="dirty"&&s.dirty(),l(d.value).then(()=>({status:s.value,value:d.value}))))}if(n.type==="transform")if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Ct(l))return E;const d=n.transform(l.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:d}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>Ct(l)?Promise.resolve(n.transform(l.value,o)).then(d=>({status:s.value,value:d})):E);z.assertNever(n)}}Ft.create=(t,e,s)=>new Ft({schema:t,typeName:T.ZodEffects,effect:e,...O(s)});Ft.createWithPreprocess=(t,e,s)=>new Ft({schema:e,effect:{type:"preprocess",transform:t},typeName:T.ZodEffects,...O(s)});class lt extends ${_parse(e){return this._getType(e)===w.undefined?Le(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lt.create=(t,e)=>new lt({innerType:t,typeName:T.ZodOptional,...O(e)});class At extends ${_parse(e){return this._getType(e)===w.null?Le(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}At.create=(t,e)=>new At({innerType:t,typeName:T.ZodNullable,...O(e)});class Ks extends ${_parse(e){const{ctx:s}=this._processInputParams(e);let a=s.data;return s.parsedType===w.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Ks.create=(t,e)=>new Ks({innerType:t,typeName:T.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...O(e)});class Bs extends ${_parse(e){const{ctx:s}=this._processInputParams(e),a={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return ps(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xe(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Xe(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Bs.create=(t,e)=>new Bs({innerType:t,typeName:T.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...O(e)});class ea extends ${_parse(e){if(this._getType(e)!==w.nan){const a=this._getOrReturnCtx(e);return N(a,{code:v.invalid_type,expected:w.nan,received:a.parsedType}),E}return{status:"valid",value:e.data}}}ea.create=t=>new ea({typeName:T.ZodNaN,...O(t)});class Gn extends ${_parse(e){const{ctx:s}=this._processInputParams(e),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class er extends ${_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?E:o.status==="dirty"?(s.dirty(),Kt(o.value)):this._def.out._parseAsync({data:o.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?E:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(e,s){return new er({in:e,out:s,typeName:T.ZodPipeline})}}class qs extends ${_parse(e){const s=this._def.innerType._parse(e),a=n=>(Ct(n)&&(n.value=Object.freeze(n.value)),n);return ps(s)?s.then(n=>a(n)):a(s)}unwrap(){return this._def.innerType}}qs.create=(t,e)=>new qs({innerType:t,typeName:T.ZodReadonly,...O(e)});re.lazycreate;var T;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(T||(T={}));const wt=ot.create,Yn=Zs.create;dt.create;He.create;const Jn=re.create;re.strictCreate;ys.create;bs.create;xt.create;St.create;_s.create;lt.create;At.create;function Qn({mantenimientos:t,onRegistrar:e,onVerDetalle:s,onEdit:a,onDelete:n,onCreate:o,onRefresh:l,categorias:d=[],tipos:x=[]}){const[m,y]=L.useState("all"),[R,f]=L.useState(!1),[Q,fe]=L.useState(""),[U,ee]=L.useState(!1),[$e,F]=L.useState("all"),[X,J]=L.useState("all"),H=async()=>{if(l){ee(!0);try{await l()}finally{ee(!1)}}},te=L.useMemo(()=>{const g=t.filter(K=>K.horasKmRestante<0).length,V=t.filter(K=>K.horasKmRestante>=0&&K.horasKmRestante<=50).length,A=t.filter(K=>K.horasKmRestante>50).length;return{total:t.length,vencidos:g,proximos:V,ok:A}},[t]),_e=L.useMemo(()=>t.filter(g=>!(!(g.ficha.toLowerCase().includes(Q.toLowerCase())||g.nombreEquipo.toLowerCase().includes(Q.toLowerCase())||g.tipoMantenimiento.toLowerCase().includes(Q.toLowerCase()))||m==="vencidos"&&g.horasKmRestante>=0||m==="proximos"&&(g.horasKmRestante<0||g.horasKmRestante>50)||m==="ok"&&g.horasKmRestante<=50||X!=="all"&&g.tipoMantenimiento!==X)),[t,m,Q,X]),ie=L.useMemo(()=>[..._e].sort((g,V)=>g.horasKmRestante-V.horasKmRestante),[_e]),ce=g=>g<0?r.jsx(ar,{className:"h-4 w-4 text-red-500"}):g<=50?r.jsx(qt,{className:"h-4 w-4 text-amber-500"}):r.jsx(Ls,{className:"h-4 w-4 text-green-500"}),ke=g=>g<0?"text-red-500":g<=50?"text-amber-500":"text-green-500",Ne=async()=>{try{const[{jsPDF:g},{default:V}]=await Promise.all([us(()=>import("./jspdf.es.min-03oR84lN.js").then(P=>P.j),__vite__mapDeps([0,1,2])),us(()=>import("./jspdf.plugin.autotable-bUJAAMeG.js"),[])]),A=new g({orientation:"landscape",unit:"mm",format:"a4"});A.setFont("helvetica"),A.setFillColor(36,99,56),A.rect(0,0,A.internal.pageSize.width,15,"F"),A.setFontSize(16),A.setTextColor(255,255,255),A.setFont("helvetica","bold"),A.text("ALITO MANTENIMIENTO",20,10),A.setFontSize(20),A.setTextColor(36,99,56),A.text("Reporte de Mantenimientos",20,28),A.setFontSize(10),A.setTextColor(100,100,100),A.setFont("helvetica","normal"),A.text(`Generado: ${new Date().toLocaleString()}`,20,35);const K=_e.map(P=>{const he=P.tipoMantenimiento==="Horas"?"hrs":"km";return[P.ficha,P.nombreEquipo,P.tipoMantenimiento,`${P.horasKmActuales} ${he}`,`${P.frecuencia} ${he}`,`${P.proximoMantenimiento} ${he}`,Bt(P.horasKmRestante,he),P.horasKmRestante<=0?"Vencido":P.horasKmRestante<=50?"Prximo":"Normal"]});V(A,{startY:45,head:[["Ficha","Equipo","Tipo","Actual","Frecuencia","Prximo","Restante","Estado"]],body:K,theme:"striped",headStyles:{fillColor:[36,99,56]},styles:{fontSize:8}}),A.save(`mantenimientos_${new Date().toISOString().split("T")[0]}.pdf`)}catch(g){console.error("Error exportando PDF:",g)}};return r.jsxs(za,{title:"Mantenimientos",headerActions:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Y,{variant:"ghost",size:"icon",onClick:Ne,className:"h-9 w-9 rounded-full hover:bg-primary/10",children:r.jsx(Fa,{className:"h-5 w-5"})}),l&&r.jsx(Y,{variant:"ghost",size:"icon",onClick:H,className:be("h-9 w-9 rounded-full",U&&"animate-spin"),children:r.jsx(Aa,{className:"h-5 w-5"})}),r.jsxs(Vs,{open:R,onOpenChange:f,children:[r.jsx(sa,{asChild:!0,children:r.jsx(Y,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full hover:bg-primary/10 active:scale-95 transition-all",children:r.jsx(Wa,{className:"h-5 w-5"})})}),r.jsxs(Ds,{side:"bottom",className:"h-[85vh] rounded-t-[2rem] border-t-0 bg-background/95 backdrop-blur-xl overflow-y-auto",children:[r.jsx("div",{className:"mx-auto mt-2 h-1 w-12 rounded-full bg-muted"}),r.jsxs(Os,{className:"mt-4",children:[r.jsx(Is,{className:"text-center text-xl font-bold",children:"Filtrar mantenimientos"}),r.jsx(Ps,{className:"text-center",children:"Personaliza la vista de tus mantenimientos"})]}),r.jsxs("div",{className:"mt-6 space-y-6 px-4 pb-8",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Estado"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs(Y,{variant:m==="all"?"default":"outline",className:be("w-full justify-start gap-3 h-12 text-base rounded-xl transition-all",m==="all"&&"bg-primary shadow-lg shadow-primary/25"),onClick:()=>y("all"),children:[r.jsx(rr,{className:"h-4 w-4"}),r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsx("span",{children:"Todos"}),r.jsx(ue,{variant:"secondary",className:"bg-background/20 text-foreground",children:te.total})]})]}),r.jsxs(Y,{variant:m==="vencidos"?"destructive":"outline",className:be("w-full justify-start gap-3 h-12 text-base rounded-xl transition-all border-red-200 dark:border-red-900",m==="vencidos"&&"shadow-lg shadow-red-900/20"),onClick:()=>y("vencidos"),children:[r.jsx(ar,{className:"h-4 w-4"}),r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsx("span",{children:"Vencidos"}),r.jsx(ue,{variant:m==="vencidos"?"secondary":"destructive",className:be(m==="vencidos"&&"bg-background/20 text-foreground"),children:te.vencidos})]})]}),r.jsxs(Y,{variant:m==="proximos"?"default":"outline",className:be("w-full justify-start gap-3 h-12 text-base rounded-xl transition-all",m==="proximos"&&"bg-amber-600 hover:bg-amber-700 shadow-lg shadow-amber-900/20 border-amber-600"),onClick:()=>y("proximos"),children:[r.jsx(qt,{className:"h-4 w-4"}),r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsx("span",{children:"Prximos"}),r.jsx(ue,{variant:"secondary",className:"bg-background/20 text-foreground",children:te.proximos})]})]})]})]}),x.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Tipo de Mantenimiento"}),r.jsxs(_r,{value:X,onValueChange:J,children:[r.jsx(jr,{className:"w-full h-12 rounded-xl",children:r.jsx(kr,{placeholder:"Seleccionar tipo"})}),r.jsxs(Nr,{children:[r.jsx(ls,{value:"all",children:"Todos los tipos"}),x.map(g=>r.jsx(ls,{value:g,children:g},g))]})]})]}),d.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Categora"}),r.jsxs(_r,{value:$e,onValueChange:F,children:[r.jsx(jr,{className:"w-full h-12 rounded-xl",children:r.jsx(kr,{placeholder:"Seleccionar categora"})}),r.jsxs(Nr,{children:[r.jsx(ls,{value:"all",children:"Todas las categoras"}),d.map(g=>r.jsx(ls,{value:g,children:g},g))]})]})]}),r.jsxs(Y,{className:"w-full h-12 rounded-xl mt-4",onClick:()=>f(!1),children:["Ver ",_e.length," resultados"]})]})]})]})]}),children:[r.jsxs("div",{className:"space-y-4 pb-24",children:[r.jsx("div",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-xl px-1 py-2 -mx-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(oe,{placeholder:"Buscar por ficha, equipo...",className:"pl-9 h-11 rounded-xl bg-muted/50 border-transparent focus:bg-background focus:border-primary/50 transition-all",value:Q,onChange:g=>fe(g.target.value)})]})}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs(zt,{variant:"glass",className:"p-2 text-center bg-primary/5 border-primary/10",children:[r.jsx("p",{className:"text-lg font-bold text-primary",children:te.total}),r.jsx("p",{className:"text-[0.6rem] uppercase tracking-wider text-muted-foreground font-semibold",children:"Total"})]}),r.jsxs(zt,{variant:"glass",className:"p-2 text-center bg-red-500/5 border-red-500/10",children:[r.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:te.vencidos}),r.jsx("p",{className:"text-[0.6rem] uppercase tracking-wider text-muted-foreground font-semibold",children:"Vencidos"})]}),r.jsxs(zt,{variant:"glass",className:"p-2 text-center bg-amber-500/5 border-amber-500/10",children:[r.jsx("p",{className:"text-lg font-bold text-amber-600 dark:text-amber-400",children:te.proximos}),r.jsx("p",{className:"text-[0.6rem] uppercase tracking-wider text-muted-foreground font-semibold",children:"Prx."})]}),r.jsxs(zt,{variant:"glass",className:"p-2 text-center bg-green-500/5 border-green-500/10",children:[r.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:te.ok}),r.jsx("p",{className:"text-[0.6rem] uppercase tracking-wider text-muted-foreground font-semibold",children:"OK"})]})]}),r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar -mx-1 px-1",children:[r.jsx(ue,{variant:m==="all"?"default":"outline",className:be("cursor-pointer px-4 py-1.5 rounded-full transition-all whitespace-nowrap",m==="all"?"bg-primary border-0":"hover:bg-accent"),onClick:()=>y("all"),children:"Todos"}),r.jsx(ue,{variant:m==="vencidos"?"destructive":"outline",className:be("cursor-pointer px-4 py-1.5 rounded-full transition-all whitespace-nowrap",m==="vencidos"?"":"hover:bg-accent"),onClick:()=>y("vencidos"),children:"Vencidos"}),r.jsx(ue,{variant:m==="proximos"?"default":"outline",className:be("cursor-pointer px-4 py-1.5 rounded-full transition-all whitespace-nowrap",m==="proximos"?"bg-amber-600 border-0":"hover:bg-accent"),onClick:()=>y("proximos"),children:"Prximos"})]}),ie.length>0?r.jsx("div",{className:"space-y-3",children:ie.map((g,V)=>r.jsxs(zt,{variant:"compact",className:be("relative animate-in slide-in-from-bottom-4 fade-in fill-mode-backwards group overflow-visible",g.horasKmRestante<0?"border-red-500/30 bg-red-500/5":g.horasKmRestante<=50?"border-amber-500/30 bg-amber-500/5":"bg-card/50 backdrop-blur-sm border-border/50"),style:{animationDelay:`${V*.05}s`},children:[r.jsxs(Za,{children:[r.jsx(Ua,{asChild:!0,children:r.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-8 w-8 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:r.jsx(Ka,{className:"h-4 w-4"})})}),r.jsxs(Ba,{align:"end",className:"w-48 rounded-xl",children:[r.jsxs(os,{onClick:()=>e(g),className:"gap-2 py-2.5",children:[r.jsx(rr,{className:"h-4 w-4 text-primary"}),"Registrar Mant."]}),r.jsxs(os,{onClick:()=>s(g.ficha),className:"gap-2 py-2.5",children:[r.jsx(cs,{className:"h-4 w-4"}),"Ver Equipo"]}),(a||n)&&r.jsx(qa,{}),a&&r.jsxs(os,{onClick:()=>a(g),className:"gap-2 py-2.5",children:[r.jsx(Ha,{className:"h-4 w-4"}),"Editar"]}),n&&r.jsxs(os,{onClick:()=>n(g),className:"gap-2 py-2.5 text-destructive focus:text-destructive",children:[r.jsx(ra,{className:"h-4 w-4"}),"Eliminar"]})]})]}),r.jsxs("div",{className:"space-y-3 pt-1 pr-6",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:be("flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center shadow-sm",g.horasKmRestante<0?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":g.horasKmRestante<=50?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"),children:ce(g.horasKmRestante)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-bold text-sm truncate",children:g.ficha}),r.jsx(ue,{variant:"outline",className:"text-[0.6rem] h-4 px-1.5 font-normal",children:g.tipoMantenimiento})]}),r.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:g.nombreEquipo})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 bg-background/40 rounded-lg p-2 border border-border/30",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[0.65rem] text-muted-foreground uppercase tracking-wider",children:"Prximo"}),r.jsxs("p",{className:"text-sm font-semibold",children:[g.proximoMantenimiento," ",g.tipoMantenimiento==="Horas"?"hrs":"km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[0.65rem] text-muted-foreground uppercase tracking-wider",children:"Restante"}),r.jsx("p",{className:be("text-sm font-bold",ke(g.horasKmRestante)),children:Bt(g.horasKmRestante,g.tipoMantenimiento==="Horas"?"hrs":"km")})]}),r.jsxs("div",{className:"col-span-2 pt-1 border-t border-border/20 mt-1 flex justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Frec: ",g.frecuencia]}),r.jsxs("span",{children:["ltimo: ",g.horasKmUltimoMantenimiento]})]})]}),r.jsxs(Y,{variant:"ghost",className:"w-full h-8 text-xs justify-between group/btn hover:bg-primary/5 hover:text-primary",onClick:()=>e(g),children:[r.jsx("span",{children:"Registrar mantenimiento"}),r.jsx(Ya,{className:"h-3 w-3 transition-transform group-hover/btn:translate-x-1"})]})]})]},`${g.ficha}-${g.proximoMantenimiento}`))}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center animate-in fade-in zoom-in-95 duration-300",children:[r.jsx("div",{className:"h-24 w-24 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:r.jsx(hs,{className:"h-10 w-10 text-muted-foreground/50"})}),r.jsx("h3",{className:"text-lg font-semibold text-muted-foreground",children:"No se encontraron resultados"}),r.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1 max-w-[200px]",children:"Intenta ajustar los filtros o buscar con otro trmino"}),r.jsx(Y,{variant:"link",className:"mt-2",onClick:()=>{y("all"),fe("")},children:"Limpiar filtros"})]})]}),o&&r.jsx("div",{className:"fixed bottom-24 right-4 z-40",children:r.jsx(Y,{size:"icon",className:"h-14 w-14 rounded-full shadow-xl shadow-primary/30 bg-primary hover:bg-primary/90 transition-transform active:scale-90",onClick:o,children:r.jsx(aa,{className:"h-6 w-6 text-primary-foreground"})})})]})}const Ms=wt().min(1,"Este campo es obligatorio").refine(t=>!Number.isNaN(Number(t)),{message:"Ingresa un nmero vlido"}).refine(t=>Number(t)>=0,{message:"El valor no puede ser negativo"}),Xn=Jn({ficha:wt().min(1,"La ficha es obligatoria"),nombreEquipo:wt().min(1,"El nombre del equipo es obligatorio"),tipoMantenimiento:wt().min(1,"El tipo de mantenimiento es obligatorio"),horasKmActuales:Ms,fechaUltimaActualizacion:wt().min(1,"La fecha de actualizacin es obligatoria"),frecuencia:Ms,horasKmUltimoMantenimiento:Ms,fechaUltimoMantenimiento:wt().nullable().optional(),activo:Yn()}),Rs=()=>({ficha:"",nombreEquipo:"",tipoMantenimiento:"",horasKmActuales:"",fechaUltimaActualizacion:new Date().toISOString().split("T")[0],frecuencia:"",horasKmUltimoMantenimiento:"",fechaUltimoMantenimiento:null,activo:!0}),ta=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toISOString().split("T")[0]};function Ii(){const{isMobile:t}=$a(),e=wa(),{data:s,loading:a,clearDatabase:n,createMantenimiento:o,updateMantenimiento:l,deleteMantenimiento:d}=Ca(),[x,m]=L.useState(!1),[y,R]=L.useState(""),[f,Q]=L.useState({tipos:[],categorias:[],estados:[],fichas:[],restanteMin:"",restanteMax:""}),[fe,U]=L.useState(!1),[ee,$e]=L.useState(1),[F,X]=L.useState(!1),[J,H]=L.useState(null),[te,_e]=L.useState(!1),[ie,ce]=L.useState(null),[ke,Ne]=L.useState(!1),[g,V]=L.useState(!1),[A,K]=L.useState("all"),[P,he]=L.useState([]),[Be,Ge]=L.useState(!1),[gt,Et]=L.useState(!1),{toast:Xt}=Sa(),G=vn({resolver:kn(Xn),defaultValues:Rs()}),es=i=>Math.min(1.4,Math.max(.8,Number(i.toFixed(2)))),ts=i=>{i.length&&$e(es(i[0]))},ss=i=>{$e(p=>es(p+i))},et=()=>{X(!1),H(null),G.reset(Rs())},Tt=()=>{H(null),G.reset(Rs()),X(!0)},ut=i=>{const p=ta(i.fechaUltimaActualizacion)||new Date().toISOString().split("T")[0],D=ta(i.fechaUltimoMantenimiento);G.reset({ficha:i.ficha,nombreEquipo:i.nombreEquipo,tipoMantenimiento:i.tipoMantenimiento,horasKmActuales:String(i.horasKmActuales),fechaUltimaActualizacion:p,frecuencia:String(i.frecuencia),horasKmUltimoMantenimiento:String(i.horasKmUltimoMantenimiento),fechaUltimoMantenimiento:D||null,activo:i.activo}),H(i),X(!0)},pt=async i=>{const p={ficha:i.ficha.trim(),nombreEquipo:i.nombreEquipo.trim(),tipoMantenimiento:i.tipoMantenimiento.trim(),horasKmActuales:Number(i.horasKmActuales),fechaUltimaActualizacion:i.fechaUltimaActualizacion,frecuencia:Number(i.frecuencia),fechaUltimoMantenimiento:i.fechaUltimoMantenimiento??null,horasKmUltimoMantenimiento:Number(i.horasKmUltimoMantenimiento),activo:i.activo};_e(!0);try{J?await l(J.id,p):await o(p),et()}catch(D){console.error("Error saving mantenimiento:",D)}finally{_e(!1)}},rs=async()=>{if(ie){Ne(!0);try{await d(ie.id),ce(null)}catch(i){console.error("Error deleting mantenimiento:",i)}finally{Ne(!1)}}};if(a)return r.jsx(nr,{title:"Mantenimiento Programado",children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"text-lg",children:"Cargando..."})})});const ht=[...new Set(s.mantenimientosProgramados.map(i=>i.tipoMantenimiento))],tt=s.equipos.reduce((i,p)=>(i[p.ficha]=p,i),{}),st=[...new Set(s.equipos.map(i=>i.categoria))],Mt=s.mantenimientosProgramados.map(i=>{const p=i.horasKmUltimoMantenimiento+i.frecuencia,D=p-i.horasKmActuales;return{...i,proximoMantenimiento:p,horasKmRestante:D}});if(t)return r.jsxs(r.Fragment,{children:[r.jsx(Qn,{mantenimientos:Mt,onRegistrar:ut,onVerDetalle:i=>e(`/equipos?search=${i}`),onEdit:ut,onDelete:i=>{ce(i)},onCreate:Tt,onRefresh:async()=>{await new Promise(i=>setTimeout(i,1e3))},categorias:st,tipos:ht,equiposPorFicha:tt}),r.jsx(ir,{open:!!ie,onOpenChange:i=>!i&&ce(null),children:r.jsxs(or,{children:[r.jsxs(lr,{children:[r.jsx(cr,{children:"Ests seguro?"}),r.jsxs(dr,{children:["Esta accin eliminar permanentemente el mantenimiento programado para ",ie==null?void 0:ie.ficha,"."]})]}),r.jsxs(ur,{children:[r.jsx(hr,{children:"Cancelar"}),r.jsx(mr,{onClick:rs,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:ke?"Eliminando...":"Eliminar"})]})]})}),r.jsx(Vs,{open:F,onOpenChange:X,children:r.jsxs(Ds,{side:"bottom",className:"h-[90vh] overflow-y-auto",children:[r.jsxs(Os,{children:[r.jsx(Is,{children:J?"Editar Mantenimiento":"Nuevo Mantenimiento"}),r.jsx(Ps,{children:J?"Actualiza los datos del mantenimiento.":"Programa un nuevo mantenimiento."})]}),r.jsx("div",{className:"py-4",children:r.jsx(Pr,{...G,children:r.jsxs("form",{onSubmit:G.handleSubmit(pt),className:"space-y-4",children:[r.jsx(je,{control:G.control,name:"ficha",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Ficha del Equipo"}),r.jsx(ve,{children:r.jsx(oe,{placeholder:"Ej. EQ-001",...i})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"nombreEquipo",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Nombre del Equipo"}),r.jsx(ve,{children:r.jsx(oe,{placeholder:"Ej. Excavadora CAT",...i})}),r.jsx(ye,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(je,{control:G.control,name:"tipoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Tipo"}),r.jsx(ve,{children:r.jsx(oe,{placeholder:"Horas/Km",...i})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"frecuencia",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Frecuencia"}),r.jsx(ve,{children:r.jsx(oe,{type:"number",...i})}),r.jsx(ye,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(je,{control:G.control,name:"horasKmActuales",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Actual"}),r.jsx(ve,{children:r.jsx(oe,{type:"number",...i})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"horasKmUltimoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"ltimo Mant."}),r.jsx(ve,{children:r.jsx(oe,{type:"number",...i})}),r.jsx(ye,{})]})})]}),r.jsx(je,{control:G.control,name:"fechaUltimoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Fecha ltimo Mantenimiento"}),r.jsx(ve,{children:r.jsx(oe,{type:"date",value:i.value?new Date(i.value).toISOString().split("T")[0]:"",onChange:p=>i.onChange(p.target.value?new Date(p.target.value).toISOString():null)})}),r.jsx(ye,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(Y,{type:"button",variant:"outline",onClick:et,children:"Cancelar"}),r.jsx(Y,{type:"submit",disabled:te,children:te?"Guardando...":"Guardar"})]})]})})})]})})]});const ws=[...new Set(s.mantenimientosProgramados.map(i=>i.ficha))].sort(),Te=Mt.filter(i=>{const p=tt[i.ficha],D=Object.values(i).join(" ").toLowerCase().includes(y.toLowerCase()),me=f.tipos.length===0||f.tipos.includes(i.tipoMantenimiento),ze=f.categorias.length===0||p&&f.categorias.includes(p.categoria),Ye=f.fichas.length===0||f.fichas.includes(i.ficha),Me=f.estados.length===0||f.estados.includes("vencido")&&i.horasKmRestante<=0||f.estados.includes("proximo")&&i.horasKmRestante>0&&i.horasKmRestante<=100||f.estados.includes("normal")&&i.horasKmRestante>100,se=Math.abs(i.horasKmRestante),at=!f.restanteMin||se>=parseFloat(f.restanteMin),nt=!f.restanteMax||se<=parseFloat(f.restanteMax);return D&&me&&ze&&Ye&&Me&&at&&nt&&i.activo}).sort((i,p)=>i.ficha.localeCompare(p.ficha,"es",{numeric:!0,sensitivity:"base"})),tr=Te.length,as=Te.filter(i=>i.horasKmRestante<=0).length,c=Te.filter(i=>i.horasKmRestante>0&&i.horasKmRestante<=100).length,u=Te.filter(i=>i.horasKmRestante>100).length,h=i=>i?new Date(i).toLocaleDateString("es-ES"):"N/A",k=i=>i<=0?{label:"Vencido",variant:"destructive"}:i<=100?{label:"Prximo",variant:"secondary"}:{label:"Normal",variant:"default"},_=async(i="all",p=[])=>{try{const[{jsPDF:D},{default:me}]=await Promise.all([us(()=>import("./jspdf.es.min-03oR84lN.js").then(se=>se.j),__vite__mapDeps([0,1,2])),us(()=>import("./jspdf.plugin.autotable-bUJAAMeG.js"),[])]),ze=new D({orientation:"landscape",unit:"mm",format:"a4"});if(Te.length===0)throw new Error("No hay mantenimientos disponibles para generar el PDF");if(i==="all")b(ze,me,Te);else if(i==="categories"&&p.length>0){const se=Te.filter(at=>{const nt=tt[at.ficha];return nt&&p.includes(nt.categoria)});if(se.length===0)throw new Error("No hay mantenimientos para las categoras seleccionadas");S(ze,me,se,p)}else b(ze,me,Te);const Ye=new Date().toISOString().split("T")[0],Me=i==="all"?`mantenimientos_completo_${Ye}.pdf`:`mantenimientos_categorias_${Ye}.pdf`;ze.save(Me)}catch(D){throw console.error("Error al exportar PDF:",D),D}},b=(i,p,D)=>{i.setFont("helvetica"),i.setFillColor(36,99,56),i.rect(0,0,i.internal.pageSize.width,15,"F"),i.setFontSize(16),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.text("ALITO MANTENIMIENTO",20,10),i.setFontSize(20),i.setTextColor(36,99,56),i.setFont("helvetica","bold"),i.text("Reporte de Mantenimientos Programados",20,28),i.setDrawColor(36,99,56),i.setLineWidth(.5),i.line(20,32,i.internal.pageSize.width-20,32),i.setFontSize(10),i.setTextColor(100,100,100),i.setFont("helvetica","normal");const me=new Date,ze=me.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ye=me.toLocaleTimeString("es-ES");i.text(`Fecha: ${ze} | Hora: ${Ye}`,20,40);const Me=D.length,se=D.filter(M=>M.horasKmRestante<=0).length,at=D.filter(M=>M.horasKmRestante>0&&M.horasKmRestante<=100).length,nt=D.filter(M=>M.horasKmRestante>100).length;i.setFontSize(14),i.setTextColor(40,40,40),i.setFont("helvetica","bold"),i.text("Resumen Ejecutivo",20,52);const Ae=58,bt=60,_t=18,Ze=65;i.setFillColor(59,130,246),i.roundedRect(20,Ae,bt,_t,3,3,"F"),i.setTextColor(255,255,255),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Total Programados",25,Ae+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(Me.toString(),25,Ae+14),i.setFillColor(239,68,68),i.roundedRect(20+Ze,Ae,bt,_t,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Vencidos",25+Ze,Ae+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(se.toString(),25+Ze,Ae+14),i.setFillColor(251,191,36),i.roundedRect(20+Ze*2,Ae,bt,_t,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Prximos (100)",25+Ze*2,Ae+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(at.toString(),25+Ze*2,Ae+14),i.setFillColor(34,197,94),i.roundedRect(20+Ze*3,Ae,bt,_t,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Normales",25+Ze*3,Ae+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(nt.toString(),25+Ze*3,Ae+14);const Fs=D.map(M=>{const xe=k(M.horasKmRestante),Se=M.tipoMantenimiento==="Horas"?"hrs":"km",Dt=tt[M.ficha];return[M.ficha,M.nombreEquipo,(Dt==null?void 0:Dt.categoria)||"N/A",M.tipoMantenimiento,`${M.horasKmActuales.toLocaleString()} ${Se}`,`${M.frecuencia.toLocaleString()} ${Se}`,`${M.horasKmUltimoMantenimiento.toLocaleString()} ${Se}`,`${M.proximoMantenimiento.toLocaleString()} ${Se}`,Bt(M.horasKmRestante,Se),h(M.fechaUltimoMantenimiento),xe.label]});p(i,{startY:82,head:[["Ficha","Equipo","Categora","Tipo","Actual","Frecuencia","lt. Mant.","Prximo","Restante","Fecha lt.","Estado"]],body:Fs,theme:"striped",styles:{fontSize:8,cellPadding:3,overflow:"linebreak",lineColor:[200,200,200],lineWidth:.1,font:"helvetica"},headStyles:{fillColor:[36,99,56],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",cellPadding:4},alternateRowStyles:{fillColor:[245,247,250]},columnStyles:{0:{cellWidth:15,halign:"center",fontStyle:"bold"},1:{cellWidth:30},2:{cellWidth:22,halign:"center"},3:{cellWidth:15,halign:"center"},4:{cellWidth:20,halign:"right"},5:{cellWidth:20,halign:"right"},6:{cellWidth:20,halign:"right",fontStyle:"bold",textColor:[37,99,235]},7:{cellWidth:20,halign:"right",fontStyle:"bold",textColor:[147,51,234]},8:{cellWidth:25,halign:"center",fontStyle:"bold"},9:{cellWidth:20,halign:"center"},10:{cellWidth:18,halign:"center",fontStyle:"bold"}},didParseCell:M=>{if(M.section==="body"){const xe=M.row.raw[10];M.column.index===10&&(xe==="Vencido"?(M.cell.styles.fillColor=[254,226,226],M.cell.styles.textColor=[185,28,28]):xe==="Prximo"?(M.cell.styles.fillColor=[254,243,199],M.cell.styles.textColor=[146,64,14]):(M.cell.styles.fillColor=[220,252,231],M.cell.styles.textColor=[21,128,61])),M.column.index===8&&(xe==="Vencido"?M.cell.styles.textColor=[220,38,38]:xe==="Prximo"?M.cell.styles.textColor=[217,119,6]:M.cell.styles.textColor=[22,163,74])}},margin:{top:20,right:15,bottom:25,left:15},pageBreak:"auto",showHead:"everyPage"});const Ce=i.internal.getNumberOfPages();for(let M=1;M<=Ce;M++){i.setPage(M);const xe=i.internal.pageSize.height-15;i.setDrawColor(36,99,56),i.setLineWidth(.3),i.line(15,xe,i.internal.pageSize.width-15,xe),i.setFontSize(8),i.setTextColor(100,100,100),i.setFont("helvetica","normal"),i.text("ALITO Mantenimiento - Sistema de Gestin",15,xe+5),i.setFont("helvetica","bold"),i.text(`Pgina ${M} de ${Ce}`,i.internal.pageSize.width-15,xe+5,{align:"right"}),i.setFontSize(7),i.setFont("helvetica","italic"),i.setTextColor(120,120,120),i.text("Documento confidencial - Uso interno exclusivo",i.internal.pageSize.width/2,xe+9,{align:"center"})}},S=(i,p,D,me)=>{let ze=!0;me.forEach(Me=>{const se=D.filter(B=>{const mt=tt[B.ficha];return mt&&mt.categoria===Me});if(se.length===0)return;ze||i.addPage(),ze=!1,i.setFont("helvetica"),i.setFillColor(36,99,56),i.rect(0,0,i.internal.pageSize.width,15,"F"),i.setFontSize(16),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.text("ALITO MANTENIMIENTO",20,10),i.setFontSize(20),i.setTextColor(36,99,56),i.text(`Mantenimientos - ${Me}`,20,28),i.setDrawColor(36,99,56),i.setLineWidth(.5),i.line(20,32,i.internal.pageSize.width-20,32),i.setFontSize(10),i.setTextColor(100,100,100),i.setFont("helvetica","normal");const at=new Date,nt=at.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ae=at.toLocaleTimeString("es-ES");i.text(`Fecha: ${nt} | Hora: ${Ae}`,20,40);const bt=se.length,_t=se.filter(B=>B.horasKmRestante<=0).length,Ze=se.filter(B=>B.horasKmRestante>0&&B.horasKmRestante<=100).length,Fs=se.filter(B=>B.horasKmRestante>100).length;i.setFontSize(14),i.setTextColor(40,40,40),i.setFont("helvetica","bold"),i.text("Resumen de Categora",20,52);const Ce=58,M=60,xe=18,Se=65;i.setFillColor(59,130,246),i.roundedRect(20,Ce,M,xe,3,3,"F"),i.setTextColor(255,255,255),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Total",25,Ce+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(bt.toString(),25,Ce+14),i.setFillColor(239,68,68),i.roundedRect(20+Se,Ce,M,xe,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Vencidos",25+Se,Ce+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(_t.toString(),25+Se,Ce+14),i.setFillColor(251,191,36),i.roundedRect(20+Se*2,Ce,M,xe,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Prximos",25+Se*2,Ce+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(Ze.toString(),25+Se*2,Ce+14),i.setFillColor(34,197,94),i.roundedRect(20+Se*3,Ce,M,xe,3,3,"F"),i.setFontSize(10),i.setFont("helvetica","normal"),i.text("Normales",25+Se*3,Ce+6),i.setFontSize(18),i.setFont("helvetica","bold"),i.text(Fs.toString(),25+Se*3,Ce+14);const Dt=se.map(B=>{const mt=k(B.horasKmRestante),Ot=B.tipoMantenimiento==="Horas"?"hrs":"km";return[B.ficha,B.nombreEquipo,B.tipoMantenimiento,`${B.horasKmActuales.toLocaleString()} ${Ot}`,`${B.frecuencia.toLocaleString()} ${Ot}`,`${B.horasKmUltimoMantenimiento.toLocaleString()} ${Ot}`,`${B.proximoMantenimiento.toLocaleString()} ${Ot}`,Bt(B.horasKmRestante,Ot),h(B.fechaUltimoMantenimiento),mt.label]});p(i,{startY:82,head:[["Ficha","Equipo","Tipo","Actual","Frecuencia","lt. Mant.","Prximo","Restante","Fecha lt.","Estado"]],body:Dt,theme:"striped",styles:{fontSize:8,cellPadding:3,overflow:"linebreak",lineColor:[200,200,200],lineWidth:.1,font:"helvetica"},headStyles:{fillColor:[36,99,56],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"center",valign:"middle",cellPadding:4},alternateRowStyles:{fillColor:[245,247,250]},columnStyles:{0:{cellWidth:18,halign:"center",fontStyle:"bold"},1:{cellWidth:32},2:{cellWidth:18,halign:"center"},3:{cellWidth:25,halign:"right"},4:{cellWidth:25,halign:"right"},5:{cellWidth:25,halign:"right",fontStyle:"bold",textColor:[37,99,235]},6:{cellWidth:25,halign:"right",fontStyle:"bold",textColor:[147,51,234]},7:{cellWidth:28,halign:"center",fontStyle:"bold"},8:{cellWidth:22,halign:"center"},9:{cellWidth:20,halign:"center",fontStyle:"bold"}},didParseCell:B=>{if(B.section==="body"){const mt=B.row.raw[9];mt==="Vencido"?(B.cell.styles.fillColor=[254,242,242],B.cell.styles.textColor=[220,38,38]):mt==="Prximo"?(B.cell.styles.fillColor=[255,251,235],B.cell.styles.textColor=[180,83,9]):(B.cell.styles.fillColor=[240,253,244],B.cell.styles.textColor=[22,163,74])}},margin:{top:20,right:15,bottom:20,left:15},pageBreak:"auto",showHead:"everyPage"})});const Ye=i.internal.getNumberOfPages();for(let Me=1;Me<=Ye;Me++){i.setPage(Me);const se=i.internal.pageSize.height-15;i.setDrawColor(36,99,56),i.setLineWidth(.3),i.line(15,se,i.internal.pageSize.width-15,se),i.setFontSize(8),i.setTextColor(100,100,100),i.setFont("helvetica","normal"),i.text("ALITO Mantenimiento - Sistema de Gestin",15,se+5),i.setFont("helvetica","bold"),i.text(`Pgina ${Me} de ${Ye}`,i.internal.pageSize.width-15,se+5,{align:"right"}),i.setFontSize(7),i.setFont("helvetica","italic"),i.setTextColor(120,120,120),i.text("Documento confidencial - Uso interno exclusivo",i.internal.pageSize.width/2,se+9,{align:"center"})}},Z=()=>{he([]),K("all"),V(!0)},W=async()=>{if(!Be){Ge(!0);try{await _(A,P),V(!1),Xt({title:"PDF generado exitosamente",description:"El archivo ha sido descargado correctamente."})}catch(i){console.error("Error al generar PDF:",i);const p=i instanceof Error?i.message:"Hubo un problema al crear el documento. Por favor, intntalo de nuevo.";Xt({title:"Error al generar PDF",description:p,variant:"destructive"})}finally{Ge(!1)}}},we=i=>{he(p=>p.includes(i)?p.filter(D=>D!==i):[...p,i])},rt=i=>{Q(p=>({...p,tipos:p.tipos.includes(i)?p.tipos.filter(D=>D!==i):[...p.tipos,i]}))},Oe=i=>{Q(p=>({...p,categorias:p.categorias.includes(i)?p.categorias.filter(D=>D!==i):[...p.categorias,i]}))},Rt=i=>{Q(p=>({...p,estados:p.estados.includes(i)?p.estados.filter(D=>D!==i):[...p.estados,i]}))},vt=i=>{Q(p=>({...p,fichas:p.fichas.includes(i)?p.fichas.filter(D=>D!==i):[...p.fichas,i]}))},yt=()=>{Q({tipos:[],categorias:[],estados:[],fichas:[],restanteMin:"",restanteMax:""}),R("")},Cs=async()=>{try{U(!0),await n()}finally{U(!1),Et(!1)}},Vt=f.tipos.length>0||f.categorias.length>0||f.estados.length>0||f.fichas.length>0||!!f.restanteMin||!!f.restanteMax||!!y,Ss=()=>r.jsxs("div",{className:"space-y-4 rounded-lg bg-slate-50 dark:bg-slate-900/50 p-4 border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"relative",children:[r.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),r.jsx(oe,{placeholder:"Buscar mantenimientos...",value:y,onChange:i=>R(i.target.value),className:"pl-10 bg-white dark:bg-slate-950 border-slate-300 dark:border-slate-700 focus:ring-primary"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[r.jsxs("div",{children:[r.jsxs(Re,{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[r.jsx("div",{className:"w-1 h-4 bg-blue-500 rounded-full"}),"Tipos"]}),r.jsx("div",{className:"space-y-2",children:ht.map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1.5 transition-colors hover:bg-white dark:hover:bg-slate-800/50",children:[r.jsx(qe,{id:`tipo-${i}`,checked:f.tipos.includes(i),onCheckedChange:()=>rt(i),className:"data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),r.jsx("label",{htmlFor:`tipo-${i}`,className:"cursor-pointer text-sm flex-1",children:i})]},i))})]}),r.jsxs("div",{children:[r.jsxs(Re,{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[r.jsx("div",{className:"w-1 h-4 bg-purple-500 rounded-full"}),"Categoras"]}),r.jsx("div",{className:"max-h-32 space-y-2 overflow-y-auto rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 p-2",children:st.map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1.5 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[r.jsx(qe,{id:`cat-simple-${i}`,checked:f.categorias.includes(i),onCheckedChange:()=>Oe(i),className:"data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500"}),r.jsx("label",{htmlFor:`cat-simple-${i}`,className:"cursor-pointer text-sm flex-1",children:i})]},i))})]}),r.jsxs("div",{children:[r.jsxs(Re,{className:"mb-2 flex items-center gap-2 text-sm font-semibold",children:[r.jsx("div",{className:"w-1 h-4 bg-emerald-500 rounded-full"}),"Estados"]}),r.jsx("div",{className:"space-y-2",children:["vencido","proximo","normal"].map(i=>{const p={vencido:{color:"red",label:"Vencidos",Icon:is,iconColor:"text-red-600 dark:text-red-500"},proximo:{color:"amber",label:"Prximos",Icon:qt,iconColor:"text-amber-600 dark:text-amber-500"},normal:{color:"emerald",label:"Normales",Icon:Ls,iconColor:"text-emerald-600 dark:text-emerald-500"}}[i],D=(p==null?void 0:p.Icon)||Ls;return r.jsxs("div",{className:be("flex items-center space-x-2 rounded-md px-2 py-1.5 transition-all duration-200",f.estados.includes(i)?"bg-primary/10 dark:bg-primary/20 border-2 border-primary/50 shadow-sm":"hover:bg-white dark:hover:bg-slate-800/50 border-2 border-transparent"),children:[r.jsx(qe,{id:`estado-simple-${i}`,checked:f.estados.includes(i),onCheckedChange:()=>Rt(i),className:`data-[state=checked]:bg-${p==null?void 0:p.color}-500 data-[state=checked]:border-${p==null?void 0:p.color}-500`}),r.jsxs("label",{htmlFor:`estado-simple-${i}`,className:"cursor-pointer text-sm flex-1 flex items-center gap-1.5",children:[r.jsx(D,{className:`h-4 w-4 ${p==null?void 0:p.iconColor}`}),p==null?void 0:p.label]})]},i)})})]}),r.jsx("div",{className:"flex items-end",children:Vt&&r.jsxs(Y,{variant:"outline",size:"sm",onClick:yt,className:"w-full transition-all hover:bg-red-50 hover:text-red-600 hover:border-red-300 dark:hover:bg-red-950 dark:hover:text-red-400 focus-visible:ring-2 focus-visible:ring-red-500",children:[r.jsx(jt,{className:"mr-2 h-4 w-4"}),"Limpiar Filtros"]})})]})]}),ns=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),r.jsx(oe,{placeholder:"Buscar mantenimientos...",value:y,onChange:i=>R(i.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Tipos (Multi-select)"}),r.jsx("div",{className:"space-y-2 rounded-md border bg-muted/30 p-3",children:ht.map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1 transition-colors hover:bg-muted/40",children:[r.jsx(qe,{id:`tipo-adv-${i}`,checked:f.tipos.includes(i),onCheckedChange:()=>rt(i)}),r.jsx("label",{htmlFor:`tipo-adv-${i}`,className:"flex-1 cursor-pointer text-sm",children:i})]},i))}),f.tipos.length>0&&r.jsxs(ue,{variant:"secondary",className:"mt-2",children:[f.tipos.length," seleccionado(s)"]})]}),r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Categoras (Multi-select)"}),r.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto rounded-md border bg-muted/30 p-3",children:st.map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1 transition-colors hover:bg-muted/40",children:[r.jsx(qe,{id:`cat-adv-${i}`,checked:f.categorias.includes(i),onCheckedChange:()=>Oe(i)}),r.jsx("label",{htmlFor:`cat-adv-${i}`,className:"flex-1 cursor-pointer text-sm",children:i})]},i))}),f.categorias.length>0&&r.jsxs(ue,{variant:"secondary",className:"mt-2",children:[f.categorias.length," seleccionada(s)"]})]}),r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Fichas Especficas"}),r.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto rounded-md border bg-muted/30 p-3",children:ws.slice(0,20).map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1 transition-colors hover:bg-muted/40",children:[r.jsx(qe,{id:`ficha-adv-${i}`,checked:f.fichas.includes(i),onCheckedChange:()=>vt(i)}),r.jsx("label",{htmlFor:`ficha-adv-${i}`,className:"flex-1 cursor-pointer text-sm font-mono",children:i})]},i))}),f.fichas.length>0&&r.jsxs(ue,{variant:"secondary",className:"mt-2",children:[f.fichas.length," seleccionada(s)"]})]}),r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Estados"}),r.jsx("div",{className:"space-y-2 rounded-md border bg-muted/30 p-3",children:["vencido","proximo","normal"].map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-1 transition-colors hover:bg-muted/40",children:[r.jsx(qe,{id:`estado-adv-${i}`,checked:f.estados.includes(i),onCheckedChange:()=>Rt(i)}),r.jsx("label",{htmlFor:`estado-adv-${i}`,className:"cursor-pointer text-sm capitalize",children:i==="proximo"?"Prximos":i==="vencido"?"Vencidos":"Normales"})]},i))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t pt-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Hrs/Km Restante Mnimo"}),r.jsx(oe,{type:"number",placeholder:"Mnimo",value:f.restanteMin,onChange:i=>Q({...f,restanteMin:i.target.value})})]}),r.jsxs("div",{children:[r.jsx(Re,{className:"mb-2 block",children:"Hrs/Km Restante Mximo"}),r.jsx(oe,{type:"number",placeholder:"Mximo",value:f.restanteMax,onChange:i=>Q({...f,restanteMax:i.target.value})})]}),r.jsx("div",{className:"flex items-end",children:Vt&&r.jsxs(Y,{variant:"outline",onClick:yt,className:"w-full transition-colors hover:bg-primary/10 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2",children:[r.jsx(jt,{className:"mr-2 h-4 w-4"}),"Limpiar Todos los Filtros"]})})]}),(f.tipos.length>0||f.categorias.length>0||f.estados.length>0||f.fichas.length>0||f.restanteMin||f.restanteMax)&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsx(Re,{className:"mb-2 block text-sm font-semibold",children:"Filtros Aplicados:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.tipos.map(i=>r.jsxs(ue,{variant:"secondary",children:["Tipo: ",i,r.jsx(jt,{className:"ml-1 h-3 w-3 cursor-pointer transition-colors hover:text-destructive",onClick:()=>rt(i)})]},i)),f.categorias.map(i=>r.jsxs(ue,{variant:"secondary",children:["Cat: ",i,r.jsx(jt,{className:"ml-1 h-3 w-3 cursor-pointer transition-colors hover:text-destructive",onClick:()=>Oe(i)})]},i)),f.fichas.map(i=>r.jsxs(ue,{variant:"secondary",className:"font-mono",children:["Ficha: ",i,r.jsx(jt,{className:"ml-1 h-3 w-3 cursor-pointer transition-colors hover:text-destructive",onClick:()=>vt(i)})]},i)),f.estados.map(i=>r.jsxs(ue,{variant:"secondary",className:"capitalize",children:[i==="proximo"?"Prximo":i==="vencido"?"Vencido":"Normal",r.jsx(jt,{className:"ml-1 h-3 w-3 cursor-pointer transition-colors hover:text-destructive",onClick:()=>Rt(i)})]},i)),f.restanteMin&&r.jsxs(ue,{variant:"secondary",children:["Restante  ",f.restanteMin]}),f.restanteMax&&r.jsxs(ue,{variant:"secondary",children:["Restante  ",f.restanteMax]})]})]})]}),sr=()=>x?ns():Ss();return r.jsxs(nr,{title:"Mantenimiento Programado",children:[r.jsx(fr,{open:F,onOpenChange:i=>{i||et()},children:r.jsxs(xr,{className:"max-h-[90vh] overflow-y-auto",children:[r.jsxs(gr,{children:[r.jsx(pr,{children:J?"Editar mantenimiento":"Nuevo mantenimiento"}),r.jsx(vr,{children:"Registra o actualiza la programacin de mantenimiento preventivo."})]}),r.jsx(Pr,{...G,children:r.jsxs("form",{onSubmit:G.handleSubmit(pt),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[r.jsx(je,{control:G.control,name:"ficha",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Ficha del equipo"}),r.jsx(ve,{children:r.jsx(oe,{...i,list:"fichas-disponibles",placeholder:"Ej. EQ-001",onBlur:p=>{i.onBlur();const D=s.equipos.filter(me=>me.activo).find(me=>me.ficha===p.target.value);D&&G.setValue("nombreEquipo",D.nombre,{shouldValidate:!0})}})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"nombreEquipo",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Nombre del equipo"}),r.jsx(ve,{children:r.jsx(oe,{...i,placeholder:"Nombre descriptivo"})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"tipoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Tipo de mantenimiento"}),r.jsx(ve,{children:r.jsx(oe,{...i,list:"tipos-mantenimiento",placeholder:"Horas, Kilmetros..."})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"fechaUltimaActualizacion",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Fecha ltima actualizacin"}),r.jsx(ve,{children:r.jsx(oe,{type:"date",value:i.value,onChange:p=>i.onChange(p.target.value)})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"horasKmActuales",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Horas/Km actuales"}),r.jsx(ve,{children:r.jsx(oe,{type:"number",min:"0",step:"0.01",inputMode:"decimal",value:i.value,onChange:p=>i.onChange(p.target.value)})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"frecuencia",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Frecuencia programada"}),r.jsx(ve,{children:r.jsx(oe,{type:"number",min:"0",step:"0.01",inputMode:"decimal",value:i.value,onChange:p=>i.onChange(p.target.value)})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"horasKmUltimoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Lectura del ltimo mantenimiento"}),r.jsx(ve,{children:r.jsx(oe,{type:"number",min:"0",step:"0.01",inputMode:"decimal",value:i.value,onChange:p=>i.onChange(p.target.value)})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"fechaUltimoMantenimiento",render:({field:i})=>r.jsxs(ge,{children:[r.jsx(pe,{children:"Fecha ltimo mantenimiento"}),r.jsx(ve,{children:r.jsx(oe,{type:"date",value:i.value??"",onChange:p=>i.onChange(p.target.value?p.target.value:null)})}),r.jsx(ye,{})]})}),r.jsx(je,{control:G.control,name:"activo",render:({field:i})=>r.jsxs(ge,{className:"flex flex-col space-y-2",children:[r.jsx(pe,{children:"Estado"}),r.jsx(ve,{children:r.jsxs("div",{className:"flex items-center gap-2 rounded-md border bg-muted/40 p-3",children:[r.jsx(La,{checked:i.value,onCheckedChange:i.onChange}),r.jsx("span",{className:"text-sm text-muted-foreground",children:i.value?"Activo":"Inactivo"})]})}),r.jsx(ye,{})]})})]}),r.jsxs(yr,{className:"gap-2 sm:space-x-2",children:[r.jsx(Y,{type:"button",variant:"outline",onClick:et,disabled:te,children:"Cancelar"}),r.jsxs(Y,{type:"submit",disabled:te,children:[te&&r.jsx(As,{className:"mr-2 h-4 w-4 animate-spin"}),J?"Actualizar mantenimiento":"Crear mantenimiento"]})]})]})}),r.jsx("datalist",{id:"fichas-disponibles",children:s.equipos.filter(i=>i.activo).map(i=>r.jsxs("option",{value:i.ficha,children:[i.ficha," - ",i.nombre]},i.id))}),r.jsx("datalist",{id:"tipos-mantenimiento",children:ht.map(i=>r.jsx("option",{value:i},i))})]})}),r.jsx(ir,{open:!!ie,onOpenChange:i=>{i||ce(null)},children:r.jsxs(or,{children:[r.jsxs(lr,{children:[r.jsx(cr,{children:"Eliminar mantenimiento?"}),r.jsxs(dr,{children:["Esta accin eliminar el mantenimiento programado de la ficha ",ie==null?void 0:ie.ficha,"."]})]}),r.jsxs(ur,{children:[r.jsx(hr,{disabled:ke,children:"Cancelar"}),r.jsxs(mr,{onClick:rs,disabled:ke,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[ke&&r.jsx(As,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})}),r.jsx(fr,{open:g,onOpenChange:V,children:r.jsxs(xr,{className:"max-w-lg",children:[r.jsxs(gr,{children:[r.jsx(pr,{children:"Configurar impresin"}),r.jsx(vr,{children:"Elige cmo deseas imprimir los mantenimientos programados"})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Re,{className:"text-base font-semibold",children:"Modo de impresin"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>K("all"),children:[r.jsx(qe,{id:"print-all",checked:A==="all",onCheckedChange:()=>K("all")}),r.jsx("div",{className:"flex-1",children:r.jsxs("label",{htmlFor:"print-all",className:"cursor-pointer",children:[r.jsx("div",{className:"font-medium",children:"Todo junto"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Imprime todos los mantenimientos en un solo documento"})]})})]}),r.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>K("categories"),children:[r.jsx(qe,{id:"print-categories",checked:A==="categories",onCheckedChange:()=>K("categories")}),r.jsx("div",{className:"flex-1",children:r.jsxs("label",{htmlFor:"print-categories",className:"cursor-pointer",children:[r.jsx("div",{className:"font-medium",children:"Por categoras"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Segmenta los mantenimientos por categora de equipo"})]})})]})]})]}),A==="categories"&&r.jsxs("div",{className:"space-y-3 border-t pt-4",children:[r.jsx(Re,{className:"text-base font-semibold",children:"Seleccionar categoras"}),r.jsx("div",{className:"max-h-64 space-y-2 overflow-y-auto rounded-md border bg-muted/30 p-3",children:st.length>0?st.map(i=>r.jsxs("div",{className:"flex items-center space-x-2 rounded-md px-2 py-2 transition-colors hover:bg-muted/40 cursor-pointer",onClick:()=>we(i),children:[r.jsx(qe,{id:`print-cat-${i}`,checked:P.includes(i),onCheckedChange:()=>we(i)}),r.jsx("label",{htmlFor:`print-cat-${i}`,className:"flex-1 cursor-pointer text-sm",children:i})]},i)):r.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay categoras disponibles"})}),P.length>0&&r.jsxs(ue,{variant:"secondary",className:"mt-2",children:[P.length," categora(s) seleccionada(s)"]})]}),r.jsx("div",{className:"rounded-lg bg-muted/50 p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(is,{className:"h-5 w-5 text-primary mt-0.5"}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsx("div",{className:"font-medium",children:"Informacin de impresin"}),r.jsx("div",{className:"text-muted-foreground",children:A==="all"?`Se imprimirn ${Te.length} mantenimientos en total.`:P.length>0?`Se imprimirn los mantenimientos de ${P.length} categora(s).`:"Selecciona al menos una categora para imprimir."})]})]})})]}),r.jsxs(yr,{className:"gap-2",children:[r.jsx(Y,{type:"button",variant:"outline",onClick:()=>V(!1),children:"Cancelar"}),r.jsxs(Y,{type:"button",onClick:W,disabled:Be||A==="categories"&&P.length===0,children:[Be?r.jsx(As,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(wr,{className:"mr-2 h-4 w-4"}),Be?"Generando":"Generar y Descargar"]})]})]})}),r.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[r.jsxs("section",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:[r.jsx(It,{className:"overflow-hidden border-l-4 border-l-slate-500 bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 hover:shadow-lg transition-all duration-300",children:r.jsxs(Pt,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Lt,{className:"text-xs font-medium uppercase tracking-wide",children:"Total Programados"}),r.jsx("div",{className:"rounded-full bg-slate-100 dark:bg-slate-800 p-2",children:r.jsx(cs,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})})]}),r.jsx($t,{className:"text-4xl font-bold tracking-tight",children:tr}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Equipos monitoreados"})]})}),r.jsx(It,{className:"overflow-hidden border-l-4 border-l-red-500 bg-gradient-to-br from-red-50 to-white dark:from-red-950/20 dark:to-slate-800 hover:shadow-lg transition-all duration-300",children:r.jsxs(Pt,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Lt,{className:"text-xs font-medium uppercase tracking-wide",children:"Vencidos"}),r.jsx("div",{className:"rounded-full bg-red-100 dark:bg-red-900/30 p-2",children:r.jsx(is,{className:"h-4 w-4 text-red-600 dark:text-red-500"})})]}),r.jsx($t,{className:"text-4xl font-bold tracking-tight text-red-600 dark:text-red-500",children:as}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requieren atencin inmediata"})]})}),r.jsx(It,{className:"overflow-hidden border-l-4 border-l-amber-500 bg-gradient-to-br from-amber-50 to-white dark:from-amber-950/20 dark:to-slate-800 hover:shadow-lg transition-all duration-300",children:r.jsxs(Pt,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Lt,{className:"text-xs font-medium uppercase tracking-wide",children:"Prximos (100)"}),r.jsx("div",{className:"rounded-full bg-amber-100 dark:bg-amber-900/30 p-2",children:r.jsx(qt,{className:"h-4 w-4 text-amber-600 dark:text-amber-500"})})]}),r.jsx($t,{className:"text-4xl font-bold tracking-tight text-amber-600 dark:text-amber-500",children:c}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Programar pronto"})]})}),r.jsx(It,{className:"overflow-hidden border-l-4 border-l-emerald-500 bg-gradient-to-br from-emerald-50 to-white dark:from-emerald-950/20 dark:to-slate-800 hover:shadow-lg transition-all duration-300",children:r.jsxs(Pt,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Lt,{className:"text-xs font-medium uppercase tracking-wide",children:"Normales"}),r.jsx("div",{className:"rounded-full bg-emerald-100 dark:bg-emerald-900/30 p-2",children:r.jsx(cs,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-500"})})]}),r.jsx($t,{className:"text-4xl font-bold tracking-tight text-emerald-600 dark:text-emerald-500",children:u}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Estado ptimo"})]})})]}),r.jsxs(It,{className:"flex flex-col overflow-hidden border-slate-200 dark:border-slate-800 shadow-sm",children:[r.jsxs(Pt,{className:"space-y-4 bg-gradient-to-r from-slate-50 to-white dark:from-slate-900 dark:to-slate-800 border-b",children:[r.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsxs($t,{className:"flex items-center gap-2 text-xl",children:[r.jsx("div",{className:"rounded-lg bg-primary/10 p-2",children:r.jsx(cs,{className:"w-5 h-5 text-primary"})}),"Mantenimientos Programados"]}),r.jsx(Lt,{className:"mt-2",children:"Control y seguimiento de mantenimientos preventivos"})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:gap-3 lg:justify-end",children:[r.jsxs(Y,{type:"button",onClick:Tt,size:"sm",className:"flex w-full items-center justify-center gap-2 sm:w-auto shadow-sm hover:shadow transition-all",children:[r.jsx(aa,{className:"h-4 w-4"}),"Nuevo mantenimiento"]}),r.jsxs(Y,{onClick:Z,variant:"outline",size:"sm",className:"flex w-full items-center justify-center gap-2 transition-all hover:bg-primary/5 hover:border-primary sm:w-auto",title:"Descargar PDF de mantenimientos",children:[r.jsx(wr,{className:"w-4 h-4"}),"Descargar PDF"]}),r.jsxs(Y,{variant:x?"default":"outline",size:"sm",onClick:()=>m(!x),className:"w-full justify-center transition-all sm:w-auto",children:[r.jsx(Cr,{className:"w-4 h-4 mr-2"}),x?"Modo Simple":"Modo Avanzado"]})]})]}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(Vs,{children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 sm:hidden",children:[r.jsx("span",{className:"text-sm font-semibold text-primary",children:"Filtros"}),r.jsx(sa,{asChild:!0,children:r.jsxs(Y,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(Cr,{className:"h-4 w-4"}),"Ajustar filtros"]})})]}),r.jsx("div",{className:"hidden sm:block",children:sr()}),r.jsxs(Ds,{side:"bottom",className:"sm:hidden overflow-y-auto",children:[r.jsxs(Os,{className:"text-left",children:[r.jsx(Is,{children:"Filtros y bsqueda"}),r.jsx(Ps,{children:"Refina la tabla para encontrar el mantenimiento que necesitas."})]}),r.jsx("div",{className:"mt-6 space-y-4 pb-6",children:sr()})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Zoom"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Y,{type:"button",size:"icon",variant:"outline",onClick:()=>ss(-.1),"aria-label":"Reducir zoom de la tabla",children:r.jsx(Ma,{className:"h-4 w-4"})}),r.jsx(Pa,{value:[ee],min:.8,max:1.4,step:.05,onValueChange:ts,className:"w-32 sm:w-40","aria-label":"Control de zoom"}),r.jsx(Y,{type:"button",size:"icon",variant:"outline",onClick:()=>ss(.1),"aria-label":"Aumentar zoom de la tabla",children:r.jsx(Ra,{className:"h-4 w-4"})}),r.jsxs("span",{className:"w-12 text-center text-sm font-medium text-muted-foreground",children:[Math.round(ee*100),"%"]})]})]})]})]}),r.jsxs(Ea,{className:"flex-1 px-0 pb-6 sm:px-6",children:[r.jsx("div",{className:"-mx-4 overflow-x-auto sm:mx-0",children:r.jsx("div",{className:"min-w-full rounded-lg border border-slate-200 dark:border-slate-800 bg-card shadow-sm",children:r.jsx("div",{className:be("overflow-x-auto",ee>1?"pb-4":void 0),style:{touchAction:"pan-y pinch-zoom"},children:r.jsx("div",{className:"origin-top-left",style:{transform:`scale(${ee})`,transformOrigin:"top left",width:`${100/ee}%`},children:r.jsxs(Da,{className:"w-full min-w-[1000px]",children:[r.jsx(Oa,{children:r.jsxs(br,{className:"bg-slate-50 dark:bg-slate-900/50 border-b-2 border-slate-200 dark:border-slate-700",children:[r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Ficha"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Equipo"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Categora"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Tipo"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Actual"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Frecuencia"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"lt. Mant."}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Prximo"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Restante"}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Fecha lt."}),r.jsx(Ie,{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Estado"}),r.jsx(Ie,{className:"text-right font-semibold text-slate-900 dark:text-slate-100",children:"Acciones"})]})}),r.jsx(Ia,{children:Te.map(i=>{const p=k(i.horasKmRestante),D=i.tipoMantenimiento==="Horas"?"hrs":"km",me=tt[i.ficha];return r.jsxs(br,{className:"hover:bg-slate-50 dark:hover:bg-slate-900/30 transition-colors border-b border-slate-100 dark:border-slate-800",children:[r.jsx(Pe,{className:"font-mono font-medium text-slate-700 dark:text-slate-300",children:i.ficha}),r.jsx(Pe,{children:r.jsx(Va,{ficha:i.ficha,variant:"link",className:"p-0 h-auto font-medium text-blue-600 dark:text-blue-400 hover:underline hover:text-blue-700 dark:hover:text-blue-300",children:i.nombreEquipo})}),r.jsx(Pe,{className:"text-slate-600 dark:text-slate-400",children:(me==null?void 0:me.categoria)||"N/A"}),r.jsx(Pe,{children:r.jsx(ue,{variant:"outline",className:"font-normal",children:i.tipoMantenimiento})}),r.jsxs(Pe,{className:"font-semibold text-slate-900 dark:text-slate-100",children:[i.horasKmActuales.toLocaleString()," ",r.jsx("span",{className:"text-xs text-muted-foreground",children:D})]}),r.jsxs(Pe,{className:"text-slate-600 dark:text-slate-400",children:[i.frecuencia.toLocaleString()," ",r.jsx("span",{className:"text-xs text-muted-foreground",children:D})]}),r.jsxs(Pe,{className:"font-medium text-blue-600 dark:text-blue-400",children:[i.horasKmUltimoMantenimiento.toLocaleString()," ",r.jsx("span",{className:"text-xs text-muted-foreground",children:D})]}),r.jsxs(Pe,{className:"font-medium text-purple-600 dark:text-purple-400",children:[i.proximoMantenimiento.toLocaleString()," ",r.jsx("span",{className:"text-xs text-muted-foreground",children:D})]}),r.jsx(Pe,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[i.horasKmRestante<=0&&r.jsx(is,{className:"h-4 w-4 text-red-500 animate-pulse"}),i.horasKmRestante>0&&i.horasKmRestante<=100&&r.jsx(qt,{className:"h-4 w-4 text-amber-500"}),r.jsx("span",{className:i.horasKmRestante<=0?"font-bold text-red-600 dark:text-red-500":i.horasKmRestante<=100?"font-bold text-amber-600 dark:text-amber-500":"font-semibold text-emerald-600 dark:text-emerald-500",children:Bt(i.horasKmRestante,D)})]})}),r.jsx(Pe,{className:"text-slate-600 dark:text-slate-400",children:h(i.fechaUltimoMantenimiento)}),r.jsx(Pe,{children:r.jsx(ue,{variant:p.variant,className:p.label==="Vencido"?"bg-red-100 text-red-700 border-red-200":p.label==="Prximo"?"bg-amber-100 text-amber-700 border-amber-200":"bg-emerald-100 text-emerald-700 border-emerald-200",children:p.label})}),r.jsx(Pe,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-1.5",children:[r.jsx(Y,{type:"button",variant:"ghost",size:"icon",onClick:()=>ut(i),"aria-label":"Editar mantenimiento",children:r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>ce(i),disabled:ke&&(ie==null?void 0:ie.id)===i.id,"aria-label":"Eliminar mantenimiento",children:r.jsx(ra,{className:"h-4 w-4"})})]})})]},i.id)})})]})})})})}),Te.length===0&&r.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No se encontraron mantenimientos que coincidan con los filtros seleccionados."})]})]})]}),r.jsx(Ta,{open:gt,onOpenChange:Et,onConfirm:Cs,title:"Eliminar todos los datos",description:"Est seguro de que desea eliminar todos los datos de la base de datos? Esta accin no se puede deshacer y se perder toda la informacin almacenada.",confirmText:"Eliminar todo",cancelText:"Cancelar",variant:"destructive"})]})}export{Ii as default};
