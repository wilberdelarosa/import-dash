import{r as y,j as e,a as G,b as ie,X as E}from"./index-C_D-5Bfv.js";import{a as oe,r as ne,b as ce,c as de,d as me,e as xe,B as o,T as he,L as ge,g as v,h as b,k as N,j as R,a0 as X,V as Q,l as S}from"./card-BIr-PJK2.js";import{S as pe,a as je,b as ue,c as fe,d as $}from"./select-3Jn5ARjr.js";import{I as Z}from"./input-DSUZcGci.js";import{B as j}from"./index-BtotK06U.js";import{T as ve,a as be,b as _,c as A,d as Ne,e as H}from"./table-CQA1OK80.js";import{C as u}from"./checkbox-BKYUVAI4.js";import{L as p}from"./label-CqFCS6R-.js";import{E as ye}from"./jspdf.es.min-03oR84lN.js";import"./jspdf.plugin.autotable-bUJAAMeG.js";import{u as we}from"./useDeviceDetection-CShWnkOv.js";import{M as Ce}from"./MobileLayout-CV04gzFk.js";import{M as F}from"./MobileCard-DMSzGukU.js";import{F as ee}from"./filter-ldW4984T.js";import{D as ke}from"./download-CzgKvGv0.js";import{T as Se}from"./trending-up-Hw4Rtp_f.js";import{C as Fe}from"./circle-check-DUwGofyK.js";import"./chevron-right-fj5H7AOZ.js";import"./sparkles-CBL8q4dG.js";function Me({stats:x,resumenCategoria:z,mantenimientosVencidos:f,onExportPDF:V}){const[a,h]=y.useState(!1),[n,M]=y.useState("all"),g=y.useMemo(()=>n==="all"?f:f.filter(i=>i.categoria===n),[f,n]);return e.jsx(Ce,{title:"Reportes",headerActions:e.jsxs(oe,{open:a,onOpenChange:h,children:[e.jsx(ne,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full hover:bg-primary/10",children:e.jsx(ee,{className:"h-5 w-5"})})}),e.jsxs(ce,{side:"bottom",className:"h-[400px] rounded-t-[2rem] border-t-0 bg-background/95 backdrop-blur-xl",children:[e.jsx("div",{className:"mx-auto mt-2 h-1 w-12 rounded-full bg-muted"}),e.jsxs(de,{className:"mt-4",children:[e.jsx(me,{className:"text-center text-xl font-bold bg-gradient-premium bg-clip-text text-transparent",children:"Filtrar por categoría"}),e.jsx(xe,{className:"text-center",children:"Selecciona una categoría para ver detalles"})]}),e.jsxs("div",{className:"mt-8 space-y-3 px-4",children:[e.jsx(j,{variant:n==="all"?"default":"outline",className:G("w-full justify-start gap-3 h-12 text-base rounded-xl",n==="all"&&"bg-gradient-premium shadow-glow-primary"),onClick:()=>{M("all"),h(!1)},children:"Todas las categorías"}),z.map(i=>e.jsxs(j,{variant:n===i.categoria?"default":"outline",className:G("w-full justify-start gap-3 h-12 text-base rounded-xl",n===i.categoria&&"bg-primary/90 shadow-lg"),onClick:()=>{M(i.categoria),h(!1)},children:[i.categoria," (",i.total,")"]},i.categoria))]})]})]}),children:e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(F,{variant:"glass",className:"p-4 border-primary/20 shadow-premium relative overflow-hidden group animate-slide-in-up",style:{animationDelay:"0s"},children:[e.jsx("div",{className:"absolute inset-0 bg-primary/5 group-hover:bg-primary/10 transition-colors"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("p",{className:"text-3xl font-bold text-primary mb-1",children:x.total}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground font-medium",children:"Total Equipos"})]})]}),e.jsxs(F,{variant:"glass",className:"p-4 border-green-500/20 shadow-premium relative overflow-hidden group animate-slide-in-up",style:{animationDelay:"0.1s"},children:[e.jsx("div",{className:"absolute inset-0 bg-green-500/5 group-hover:bg-green-500/10 transition-colors"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600 mb-1",children:x.activos}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-green-600/80 font-medium",children:"Activos"})]})]}),e.jsxs(F,{variant:"glass",className:"p-4 border-red-500/20 shadow-premium relative overflow-hidden group animate-slide-in-up",style:{animationDelay:"0.2s"},children:[e.jsx("div",{className:"absolute inset-0 bg-red-500/5 group-hover:bg-red-500/10 transition-colors"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("p",{className:"text-3xl font-bold text-red-600 mb-1",children:x.vencidos}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-red-600/80 font-medium",children:"Vencidos"})]})]}),e.jsxs(F,{variant:"glass",className:"p-4 border-amber-500/20 shadow-premium relative overflow-hidden group animate-slide-in-up",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"absolute inset-0 bg-amber-500/5 group-hover:bg-amber-500/10 transition-colors"}),e.jsxs("div",{className:"text-center relative z-10",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-600 mb-1",children:x.porVencer}),e.jsx("p",{className:"text-xs uppercase tracking-wider text-amber-600/80 font-medium",children:"Por Vencer"})]})]})]}),e.jsxs(j,{className:"w-full h-12 bg-gradient-premium shadow-glow-primary text-base font-semibold active:scale-95 transition-all rounded-xl",size:"lg",onClick:V,children:[e.jsx(ke,{className:"mr-2 h-5 w-5"}),"Descargar Reporte PDF"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-muted-foreground px-1 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Por Categoría"]}),e.jsx("div",{className:"space-y-2",children:z.map((i,w)=>e.jsx(F,{variant:"glass",className:"p-3 border border-border/40 hover:shadow-premium transition-all animate-slide-in-up fill-mode-backwards",style:{animationDelay:`${w*.05}s`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground/90",children:i.categoria}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"secondary",className:"text-xs glass-panel",children:i.total}),e.jsxs(o,{variant:"outline",className:"text-xs text-green-600 border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800",children:[i.activos," activos"]})]})]})},i.categoria))})]}),g.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-red-600 px-1 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 animate-pulse"}),"Atención Requerida"]}),n!=="all"&&e.jsx(o,{variant:"outline",className:"text-xs cursor-pointer",onClick:()=>M("all"),children:"Ver todas"})]}),e.jsx("div",{className:"space-y-2",children:g.slice(0,10).map((i,w)=>e.jsx(F,{variant:"glass",className:"p-3 border-l-4 border-l-red-500 bg-red-500/5 animate-slide-in-up fill-mode-backwards",style:{animationDelay:`${w*.05}s`},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm text-foreground/90 truncate",children:i.nombreEquipo}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:i.ficha})]}),e.jsxs(o,{variant:"destructive",className:"text-[0.65rem] shadow-sm ml-2 whitespace-nowrap",children:["-",Math.abs(i.horasKmRestante).toFixed(0)," hrs"]})]})},i.id))}),g.length>10&&e.jsxs("p",{className:"text-center text-xs text-muted-foreground",children:["+",g.length-10," mantenimientos más"]})]}),g.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center animate-fade-in",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-green-500/10 flex items-center justify-center mb-4",children:e.jsx(Fe,{className:"h-10 w-10 text-green-500"})}),e.jsx("p",{className:"text-base font-semibold text-foreground/80",children:"¡Todo al día!"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-[250px]",children:n==="all"?"No hay mantenimientos vencidos en este momento":`No hay mantenimientos vencidos en ${n}`})]})]})})}function Ye(){const{data:x,loading:z}=ie(),[f,V]=y.useState(!1),[a,h]=y.useState({categorias:[],marcas:[],estados:[],fichas:[],fechaDesde:"",fechaHasta:"",horasDesde:"",horasHasta:""}),[n,M]=y.useState("todos"),g=x.equipos.filter(s=>s.activo),i=[...new Set(g.map(s=>s.categoria))],w=[...new Set(g.map(s=>s.marca))],se=[...new Set(g.map(s=>s.ficha))].sort(),I=y.useMemo(()=>g.map(s=>{const l=x.mantenimientosProgramados.find(t=>t.ficha===s.ficha),r=l==null?void 0:l.horasKmRestante;let m;return r==null||Number.isNaN(r)?m="sin-programar":r<=0?m="vencido":r<=100?m="proximo":m="normal",{...s,estadoMantenimiento:m,mantenimientoHorasRestante:r}}),[g,x.mantenimientosProgramados]),d=I.filter(s=>{const l=a.categorias.length===0||a.categorias.includes(s.categoria),r=a.marcas.length===0||a.marcas.includes(s.marca),m=a.estados.length===0||a.estados.includes("activo")&&s.activo||a.estados.includes("inactivo")&&!s.activo,t=a.fichas.length===0||a.fichas.includes(s.ficha),c=x.mantenimientosProgramados.find(re=>re.ficha===s.ficha),P=(c==null?void 0:c.horasKmActuales)||0,q=!a.horasDesde||P>=parseFloat(a.horasDesde),B=!a.horasHasta||P<=parseFloat(a.horasHasta);return l&&r&&m&&t&&q&&B}),W=y.useMemo(()=>I.filter(s=>n==="todos"||s.estadoMantenimiento===n),[I,n]),D=i.map(s=>{const l=d.filter(r=>r.categoria===s);return{categoria:s,total:l.length,activos:l.filter(r=>r.activo).length,inactivos:l.filter(r=>!r.activo).length}}),ae=w.map(s=>{const l=d.filter(r=>r.marca===s);return{marca:s,total:l.length,activos:l.filter(r=>r.activo).length,inactivos:l.filter(r=>!r.activo).length}}),C=x.mantenimientosProgramados.filter(s=>s.activo&&s.horasKmRestante<=0),k=x.mantenimientosProgramados.filter(s=>s.activo&&s.horasKmRestante>0&&s.horasKmRestante<=100),U=()=>{const s={fecha:new Date().toISOString(),filtros:a,resumen:{totalEquipos:d.length,equiposActivos:d.filter(c=>c.activo).length,equiposInactivos:d.filter(c=>!c.activo).length,mantenimientosVencidos:C.length,mantenimientosPorVencer:k.length},equipos:d,resumenPorCategoria:D,resumenPorMarca:ae,mantenimientos:{vencidos:C,porVencer:k}},l=JSON.stringify(s,null,2),r=new Blob([l],{type:"application/json"}),m=URL.createObjectURL(r),t=document.createElement("a");t.href=m,t.download=`reporte-equipos-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(m)},K=()=>{const s=new ye("landscape");s.setFontSize(20),s.setTextColor(34,197,94),s.text("Reporte de Equipos y Analytics",20,20),s.setFontSize(10),s.setTextColor(100,100,100),s.text(`Generado: ${new Date().toLocaleDateString("es-ES")} ${new Date().toLocaleTimeString("es-ES")}`,20,28),s.setFontSize(14),s.setTextColor(40,40,40),s.text("Resumen General",20,40),s.setFontSize(10),s.text(`Total de Equipos: ${d.length}`,20,48),s.text(`Activos: ${d.filter(t=>t.activo).length}`,20,55),s.text(`Inactivos: ${d.filter(t=>!t.activo).length}`,20,62),s.text(`Mantenimientos Vencidos: ${C.length}`,150,48),s.text(`Mantenimientos por Vencer: ${k.length}`,150,55),D.length>0&&(s.setFontSize(12),s.text("Resumen por Categoría",20,75),s.autoTable({startY:80,head:[["Categoría","Total","Activos","Inactivos"]],body:D.map(t=>[t.categoria,t.total,t.activos,t.inactivos]),theme:"grid",headStyles:{fillColor:[34,197,94],textColor:255,fontStyle:"bold"},styles:{fontSize:9,cellPadding:3},margin:{left:20,right:150}}));const l=s.lastAutoTable?s.lastAutoTable.finalY+15:120;s.setFontSize(12),s.text("Detalle de Equipos",20,l);const r=d.map(t=>{const c=x.mantenimientosProgramados.find(B=>B.ficha===t.ficha),P=(c==null?void 0:c.horasKmActuales)||0,q=(c==null?void 0:c.tipoMantenimiento)==="Horas"?"hrs":"km";return[t.ficha,t.nombre,t.categoria,t.marca,t.modelo,`${P.toFixed(1)} ${q}`,t.activo?"Activo":"Inactivo"]});s.autoTable({startY:l+5,head:[["Ficha","Nombre","Categoría","Marca","Modelo","Horas/Km","Estado"]],body:r,theme:"grid",headStyles:{fillColor:[34,197,94],textColor:255,fontStyle:"bold"},styles:{fontSize:8,cellPadding:3},columnStyles:{0:{cellWidth:20},1:{cellWidth:45},2:{cellWidth:35},3:{cellWidth:35},4:{cellWidth:40},5:{cellWidth:30},6:{cellWidth:25}},didParseCell:t=>{t.section==="body"&&t.column.index===6&&(t.cell.raw==="Activo"?(t.cell.styles.fillColor=[240,253,244],t.cell.styles.textColor=[22,163,74],t.cell.styles.fontStyle="bold"):(t.cell.styles.fillColor=[254,242,242],t.cell.styles.textColor=[220,38,38]))}});const m=s.internal.getNumberOfPages();for(let t=1;t<=m;t++)s.setPage(t),s.setFontSize(8),s.setTextColor(100,100,100),s.text(`Página ${t} de ${m}`,s.internal.pageSize.width-30,s.internal.pageSize.height-10);s.save(`reporte-equipos-${new Date().toISOString().split("T")[0]}.pdf`)},L=s=>{h(l=>({...l,categorias:l.categorias.includes(s)?l.categorias.filter(r=>r!==s):[...l.categorias,s]}))},O=s=>{h(l=>({...l,marcas:l.marcas.includes(s)?l.marcas.filter(r=>r!==s):[...l.marcas,s]}))},T=s=>{h(l=>({...l,estados:l.estados.includes(s)?l.estados.filter(r=>r!==s):[...l.estados,s]}))},J=s=>{h(l=>({...l,fichas:l.fichas.includes(s)?l.fichas.filter(r=>r!==s):[...l.fichas,s]}))},te=()=>{h({categorias:[],marcas:[],estados:[],fichas:[],fechaDesde:"",fechaHasta:"",horasDesde:"",horasHasta:""})},Y={normal:{label:"Normal",badgeClass:"bg-emerald-100 text-emerald-700"},proximo:{label:"Próximo",badgeClass:"bg-amber-100 text-amber-700"},vencido:{label:"Vencido",badgeClass:"bg-red-100 text-red-700"},"sin-programar":{label:"Sin programar",badgeClass:"bg-slate-100 text-slate-600"}},{isMobile:le}=we();return le?e.jsx(Me,{stats:{total:d.length,activos:d.filter(s=>s.activo).length,vencidos:C.length,porVencer:k.length},resumenCategoria:D,mantenimientosVencidos:C,onExportPDF:K}):e.jsxs(ge,{title:"Reportes y Analytics",children:[e.jsxs(v,{className:"mb-6",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(N,{className:"flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Filtros de Reporte"]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:gap-3",children:[e.jsx(j,{variant:f?"default":"outline",size:"sm",onClick:()=>V(!f),className:"w-full justify-center sm:w-auto",children:f?"Modo Simple":"Modo Avanzado"}),(a.categorias.length>0||a.marcas.length>0||a.estados.length>0||a.fichas.length>0)&&e.jsxs(j,{variant:"ghost",size:"sm",onClick:te,className:"w-full justify-center sm:w-auto",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Limpiar Filtros"]})]})]})}),e.jsx(R,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Categorías (Multi-select)"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-md p-3 bg-muted/30",children:i.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`cat-adv-${s}`,checked:a.categorias.includes(s),onCheckedChange:()=>L(s)}),e.jsx("label",{htmlFor:`cat-adv-${s}`,className:"text-sm cursor-pointer flex-1",children:s})]},s))}),a.categorias.length>0&&e.jsxs(o,{variant:"secondary",className:"mt-2",children:[a.categorias.length," seleccionada(s)"]})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Marcas (Multi-select)"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-md p-3 bg-muted/30",children:w.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`marca-adv-${s}`,checked:a.marcas.includes(s),onCheckedChange:()=>O(s)}),e.jsx("label",{htmlFor:`marca-adv-${s}`,className:"text-sm cursor-pointer flex-1",children:s})]},s))}),a.marcas.length>0&&e.jsxs(o,{variant:"secondary",className:"mt-2",children:[a.marcas.length," seleccionada(s)"]})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Fichas Específicas"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border rounded-md p-3 bg-muted/30",children:se.slice(0,20).map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`ficha-${s}`,checked:a.fichas.includes(s),onCheckedChange:()=>J(s)}),e.jsx("label",{htmlFor:`ficha-${s}`,className:"text-sm cursor-pointer flex-1 font-mono",children:s})]},s))}),a.fichas.length>0&&e.jsxs(o,{variant:"secondary",className:"mt-2",children:[a.fichas.length," seleccionada(s)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Horas/Km desde"}),e.jsx(Z,{type:"number",placeholder:"Mínimo",value:a.horasDesde,onChange:s=>h({...a,horasDesde:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Horas/Km hasta"}),e.jsx(Z,{type:"number",placeholder:"Máximo",value:a.horasHasta,onChange:s=>h({...a,horasHasta:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Estados"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"estado-activo-adv",checked:a.estados.includes("activo"),onCheckedChange:()=>T("activo")}),e.jsx("label",{htmlFor:"estado-activo-adv",className:"text-sm cursor-pointer",children:"Activos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"estado-inactivo-adv",checked:a.estados.includes("inactivo"),onCheckedChange:()=>T("inactivo")}),e.jsx("label",{htmlFor:"estado-inactivo-adv",className:"text-sm cursor-pointer",children:"Inactivos"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(j,{onClick:K,className:"w-full",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]}),e.jsxs(j,{onClick:U,variant:"outline",className:"w-full",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Exportar JSON"]})]})]}),(a.categorias.length>0||a.marcas.length>0||a.fichas.length>0||a.estados.length>0||a.horasDesde||a.horasHasta)&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(p,{className:"mb-2 block text-sm font-semibold",children:"Filtros Aplicados:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.categorias.map(s=>e.jsxs(o,{variant:"secondary",children:["Cat: ",s,e.jsx(E,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>L(s)})]},s)),a.marcas.map(s=>e.jsxs(o,{variant:"secondary",children:["Marca: ",s,e.jsx(E,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>O(s)})]},s)),a.fichas.map(s=>e.jsxs(o,{variant:"secondary",className:"font-mono",children:["Ficha: ",s,e.jsx(E,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>J(s)})]},s)),a.estados.map(s=>e.jsxs(o,{variant:"secondary",children:[s==="activo"?"Activo":"Inactivo",e.jsx(E,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>T(s)})]},s)),a.horasDesde&&e.jsxs(o,{variant:"secondary",children:["Horas ≥ ",a.horasDesde]}),a.horasHasta&&e.jsxs(o,{variant:"secondary",children:["Horas ≤ ",a.horasHasta]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Categorías"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded-md p-2",children:i.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`cat-${s}`,checked:a.categorias.includes(s),onCheckedChange:()=>L(s)}),e.jsx("label",{htmlFor:`cat-${s}`,className:"text-sm cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Marcas"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded-md p-2",children:w.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:`marca-${s}`,checked:a.marcas.includes(s),onCheckedChange:()=>O(s)}),e.jsx("label",{htmlFor:`marca-${s}`,className:"text-sm cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(p,{className:"mb-2 block",children:"Estados"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"estado-activo",checked:a.estados.includes("activo"),onCheckedChange:()=>T("activo")}),e.jsx("label",{htmlFor:"estado-activo",className:"text-sm cursor-pointer",children:"Activos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"estado-inactivo",checked:a.estados.includes("inactivo"),onCheckedChange:()=>T("inactivo")}),e.jsx("label",{htmlFor:"estado-inactivo",className:"text-sm cursor-pointer",children:"Inactivos"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(j,{onClick:K,className:"w-full",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]}),e.jsxs(j,{onClick:U,variant:"outline",className:"w-full",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Exportar JSON"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(v,{children:e.jsxs(b,{className:"pb-2",children:[e.jsx(S,{children:"Total Equipos"}),e.jsx(N,{className:"text-2xl",children:d.length})]})}),e.jsx(v,{children:e.jsxs(b,{className:"pb-2",children:[e.jsx(S,{children:"Activos"}),e.jsx(N,{className:"text-2xl text-success",children:d.filter(s=>s.activo).length})]})}),e.jsx(v,{children:e.jsxs(b,{className:"pb-2",children:[e.jsx(S,{children:"Mantenimientos Vencidos"}),e.jsx(N,{className:"text-2xl text-destructive",children:C.length})]})}),e.jsx(v,{children:e.jsxs(b,{className:"pb-2",children:[e.jsx(S,{children:"Por Vencer"}),e.jsx(N,{className:"text-2xl text-warning",children:k.length})]})})]}),e.jsxs(v,{className:"mb-6",children:[e.jsxs(b,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Equipos por estado de mantenimiento"}),e.jsx(S,{children:"Consulta rápidamente la ficha de cada equipo según su estado."})]}),e.jsxs(pe,{value:n,onValueChange:s=>M(s),children:[e.jsx(je,{className:"w-full sm:w-56",children:e.jsx(ue,{placeholder:"Filtrar por estado"})}),e.jsxs(fe,{children:[e.jsx($,{value:"todos",children:"Todos los estados"}),e.jsx($,{value:"normal",children:"Normal"}),e.jsx($,{value:"proximo",children:"Próximo"}),e.jsx($,{value:"vencido",children:"Vencido"})]})]})]}),e.jsx(R,{children:W.length>0?e.jsx("div",{className:"space-y-3",children:W.map(s=>e.jsxs("div",{className:"flex flex-col gap-1 rounded-lg border p-3 transition hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.nombre}),s.estadoMantenimiento!=="sin-programar"&&e.jsx(o,{className:`${Y[s.estadoMantenimiento].badgeClass} border-0`,children:Y[s.estadoMantenimiento].label})]}),e.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:s.ficha})]},s.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay equipos que coincidan con el estado seleccionado."})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(b,{children:e.jsx(N,{children:"Resumen por Categoría"})}),e.jsx(R,{children:e.jsxs(ve,{className:"min-w-[500px]",children:[e.jsx(be,{children:e.jsxs(_,{children:[e.jsx(A,{children:"Categoría"}),e.jsx(A,{children:"Total"}),e.jsx(A,{children:"Activos"}),e.jsx(A,{children:"Inactivos"})]})}),e.jsx(Ne,{children:D.map(s=>e.jsxs(_,{children:[e.jsx(H,{className:"font-medium",children:s.categoria}),e.jsx(H,{children:s.total}),e.jsx(H,{className:"text-success",children:s.activos}),e.jsx(H,{className:"text-destructive",children:s.inactivos})]},s.categoria))})]})})]}),e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(N,{children:"Mantenimientos Críticos"}),e.jsx(S,{children:"Equipos que requieren atención inmediata"})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-3",children:[C.slice(0,5).map(s=>e.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border p-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.nombreEquipo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.ficha})]}),e.jsxs(o,{variant:"destructive",children:["Vencido: ",Math.abs(s.horasKmRestante).toFixed(1)," ",s.tipoMantenimiento==="Horas"?"hrs":"km"]})]},s.id)),k.slice(0,3).map(s=>e.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border p-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.nombreEquipo}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.ficha})]}),e.jsxs(o,{variant:"secondary",children:["Resta: ",s.horasKmRestante.toFixed(1)," ",s.tipoMantenimiento==="Horas"?"hrs":"km"]})]},s.id))]})})]})]})]})}export{Ye as default};
